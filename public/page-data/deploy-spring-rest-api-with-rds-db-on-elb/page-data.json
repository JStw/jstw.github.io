{"componentChunkName":"component---src-templates-blog-post-js","path":"/deploy-spring-rest-api-with-rds-db-on-elb/","result":{"data":{"site":{"siteMetadata":{"title":"Jstw Blog"}},"markdownRemark":{"id":"15f03f37-db23-56bb-b19c-7d41460af8de","excerpt":"Hello guys! I didn’t publish an article since a while! So today, I wanted to share with how to deals with a REST API built with Spring Boot that communicates…","html":"<p>Hello guys!</p>\n<p>I didn’t publish an article since a while! So today, I wanted to share with how to deals with a REST API built with Spring Boot that communicates with a MySQL database.</p>\n<p>Like always, there is a list of pre-requisites that you must have before continuing:</p>\n<ul>\n<li>An AWS account is required (<a href=\"https://portal.aws.amazon.com/billing/signup#/start\">click here</a> to create one)</li>\n<li>Spring Boot with Java (<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started.html#getting-started-installing-spring-boot\">click here</a> to download/install)</li>\n<li>MySQL (<a href=\"https://dev.mysql.com/doc/mysql-getting-started/en/#mysql-getting-started-installing\">click here</a> to download/install)</li>\n</ul>\n<p>Ok, let’s move on!</p>\n<hr>\n<h2>Step 1: Spring Rest API</h2>\n<p>The first step is to initialize our spring boot app with the <a href=\"https://start.spring.io/\">Spring Initializer</a>. Let’s create a sample Maven Project (Java 11) like below:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ec7ed471ce06e749ccc822c5f20a676c/fe60e/spring_init.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.27027027027027%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABJ0AAASdAHeZh94AAABPUlEQVQoz32R23LDIAxE/f+f2If2IXEmgG3A+MbF3rJKk0nTi2Z2PAbpaCWaaQ7Y9wLgAKOUgsEOyDnjOI56t8v5tm0Yx4Dn4JkxRjSOI5ZlQXPtLvDBVtwXcM/wk63JEeu2IqUk5846nNsTWvtez6I0ImAYBhGB67qi0UrDaIMYoySwayoReb+B6JLhva/AFu/tG0yvavEmuZyITTkRoyFdKYVpmgTKzqWu4Dj2b+NZZ6GVgbIXdOGKFLMA6WqtXzamGkIIdc5JAv9jHXcT3QqY6KytjTXa4QPLNldnO3LJVUX0ALL7PM/QWqPve4QQZDyKe/HOyziE886Gvjpa8BoPIJNZeH8tumXhXby7P8xvgFc13F0/9NBG4XQ6o+s6cccVULaOGlP6Afkrmpzo0GOJk+yrPO3jVf85u+sTxz29Ipgbe7EAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"spring initialization\"\n        title=\"spring initialization\"\n        src=\"/static/ec7ed471ce06e749ccc822c5f20a676c/fcda8/spring_init.png\"\n        srcset=\"/static/ec7ed471ce06e749ccc822c5f20a676c/12f09/spring_init.png 148w,\n/static/ec7ed471ce06e749ccc822c5f20a676c/e4a3f/spring_init.png 295w,\n/static/ec7ed471ce06e749ccc822c5f20a676c/fcda8/spring_init.png 590w,\n/static/ec7ed471ce06e749ccc822c5f20a676c/efc66/spring_init.png 885w,\n/static/ec7ed471ce06e749ccc822c5f20a676c/c83ae/spring_init.png 1180w,\n/static/ec7ed471ce06e749ccc822c5f20a676c/fe60e/spring_init.png 1677w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>For this example, we will just need 3 dependencies :</p>\n<ul>\n<li>Spring Web — Full-stack web development with Tomcat and Spring MVC</li>\n<li>Spring Data JPA — Java Persistence API including spring-data-JPA, spring-orm, and Hibernate</li>\n<li>MySQL Driver — MySQL JDBC driver</li>\n</ul>\n<p>Once it’s done, you can click on generate and it will download a zip file that you can extract and import in your IDE.</p>\n<p>Next step is to define our DB configuration. For that, create a file in <code class=\"language-text\">&lt;&lt; path of your project &gt;&gt;/src/main/resources/application.properties</code> and put this configuration :</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># Server configuration</span>\nserver.port=8080\n\n<span class=\"token comment\"># Spring</span>\nspring.datasource.url=jdbc<span class=\"token punctuation\">:</span>mysql<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span>3306/my_db<span class=\"token punctuation\">?</span>useSSL=false\nspring.datasource.username=root\nspring.datasource.password=root\n\n<span class=\"token comment\"># Hibernate</span>\n<span class=\"token comment\"># The SQL dialect makes Hibernate generate better SQL for the chosen database</span>\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\n\n<span class=\"token comment\"># Hibernate ddl auto (create, create-drop, validate, update)</span>\nspring.jpa.hibernate.ddl<span class=\"token punctuation\">-</span>auto=update</code></pre></div>\n<p>Our configuration is done, so the next step is to create our class entity model. It’s a simple project, so I will create just a simple one: Song.</p>\n<p>Let’s create a folder <code class=\"language-text\">models</code> in our application, and create a Java Class Song like below :</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token annotation punctuation\">@Table</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"songs\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Song</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span>AUTO<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> title<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> album<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> author<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> rate<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Song</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Long</span> <span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setId</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> title<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> title<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> title<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getAlbum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> album<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setAlbum</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> album<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>album <span class=\"token operator\">=</span> album<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getAuthor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> author<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setAuthor</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> author<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>author <span class=\"token operator\">=</span> author<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getRate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> rate<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setRate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> rate<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rate <span class=\"token operator\">=</span> rate<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Once our model entity is created, let’s create the repository class. Create a folder <code class=\"language-text\">repositories</code> and create a java class called SongRepository with the following code:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Repository</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">SongRepository</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">JpaRepository</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Song</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And the latest step for our API is to create the controller to serve the data. Create the latest folder called <code class=\"language-text\">controllers</code> and add a SongController Java Class like below :</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SongController</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">SongRepository</span> songRepository<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SongController</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SongRepository</span> songRepository<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>songRepository <span class=\"token operator\">=</span> songRepository<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/songs\"</span><span class=\"token punctuation\">,</span> method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">,</span> produces <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">.</span>APPLICATION_JSON_VALUE<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Song</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getAllSongs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>songRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/songs\"</span><span class=\"token punctuation\">,</span> method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">,</span> produces <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">.</span>APPLICATION_JSON_VALUE<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Song</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getAllSongs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>songRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Before starting our application, we need to create the database that we provided in the <code class=\"language-text\">application.properties</code> file. So, connect to MySQL via command line and create your DB as below :</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">mysql -u root -p\n# hit your password\n\n# create the database my_db :\ncreate database my_db;</code></pre></div>\n<p>We need to fill a little bit our DB, so I added a new method in our SongController :</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"/init-db\"</span><span class=\"token punctuation\">,</span> method <span class=\"token operator\">=</span> <span class=\"token class-name\">RequestMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">,</span> produces <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">.</span>APPLICATION_JSON_VALUE<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">fillDatabase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Song</span> song1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Song</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    song1<span class=\"token punctuation\">.</span><span class=\"token function\">setAuthor</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bigflo &amp; Oli\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    song1<span class=\"token punctuation\">.</span><span class=\"token function\">setAlbum</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"La vie de rêve\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    song1<span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bienvenue chez moi\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    song1<span class=\"token punctuation\">.</span><span class=\"token function\">setRate</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Song</span> song2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Song</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    song2<span class=\"token punctuation\">.</span><span class=\"token function\">setAuthor</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Mathieu Chédid\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    song2<span class=\"token punctuation\">.</span><span class=\"token function\">setAlbum</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Je dis aime\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    song2<span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Monde virtuel\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    song1<span class=\"token punctuation\">.</span><span class=\"token function\">setRate</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Song</span> song3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Song</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    song3<span class=\"token punctuation\">.</span><span class=\"token function\">setAuthor</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Lee fields\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    song3<span class=\"token punctuation\">.</span><span class=\"token function\">setAlbum</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Faithful Man\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    song3<span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Wish you were here\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    song1<span class=\"token punctuation\">.</span><span class=\"token function\">setRate</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>songRepository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>song1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>songRepository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>song2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>songRepository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>song3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"Database has been filled in !\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ok so I think we can check if everything is ok by running <code class=\"language-text\">mvn spring-boot:run</code> in your project folder.</p>\n<p>Our application run successfully :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2021-01-14 08:55:42.067  INFO 12800 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#39;applicationTaskExecutor&#39;\n2021-01-14 08:55:42.254  INFO 12800 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;\n2021-01-14 08:55:42.260  INFO 12800 --- [           main] c.jstw.mysuperapi.MysuperapiApplication  : Started MysuperapiApplication in 3.056 seconds (JVM running for 3.362)</code></pre></div>\n<p>Let’s first hit our init DB endpoint : <code class=\"language-text\">http://localhost:8080/api/init-db</code>\nand then let’s test <code class=\"language-text\">http://localhost:8080/api/songs</code> :</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 480px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/49a778ffd8dd4ee91e6178fdd5ae16fa/e85cb/db_query.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 156.75675675675674%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAfCAYAAADnTu3OAAAACXBIWXMAABJ0AAASdAHeZh94AAADyUlEQVRIx41W2ZLiOBD0/3/cPs3sbjfD0WAMxvd9yFZuVjEi7IbuHUUUustZyjrw8jxHkiR4e3vD+XxGHMfIsgy32w273Q4fHx/aHw4HbLdbbDYb7Pd7FVlL01TPu95rmgZ1XUMUS19VFcqy1F4OFHmGPEt5IeM81YsCQPZE5JyIu+tVHCRJirwotG+7DqMxutnUFfK6R9EaTJNB3/cYhgGG+23bQsAslcmaV/q/EG9/Itn/g2j7A02ww9jJQR4qC+RVh6KhknFAx4+JiFKnTKwRhdKrQp4EMAN2YmdgzYB55vjRrMo8W1i7llfNk5+aX+tojruu/eMi8MVdRRWGoYpwIHNVKNDFFKfoT5vci6JIxZnuzfP8OCBjJ3YxfqzZ9fxzEzBeP5I9yiDCx3bSL8ZOuv557bN4cXCEv/0XQ1OiIUsZ/SzNCpzSu3sIm85pT0mPth8x8qLMxdVkT86M43hXOCQB+uiEIY++/bJccHKf0yISKfNpmvTj0ntFWWHHEDr5vjJ1uVw07ASBjIMg0HAU0nz/rOEpJLQdHX7zF9o4cA94dxtxxpLQC4pAdxHQtR1cWMqaIJG57kk0ydtXOca+VV130kiKKHIoxJTX7K3dyc2tc/vfylShPvbppI8rJ1WpmdGXglSIeY6a79pDofTuiiGT2eGGNEgYzwPiK5BGVqXILLKEEtOxi0lvPBALQiFCHrpg71BYMpa8B8h3Vyo3uB6B0y+L6wm4fHC8pQWdwTzNT4i96/WKzfs7zpcQJcO5GoCsHHH8SYZ3CQ7nBB/+iP0BCIksCC0utxk5U1rF82VnV+KJC0hGvkV0jZGmlA16Y2lOR3YNMqavbpwwEoysD5NFT5GzKmYtarKk+TRNFH7bNuIDzGaTpqw1If/flBRB6EiBkmLupFwy+uGAklt1xY81NItP3VT2t9/hKUeqQik2D5a5ONFp0+0VxfGGth7h70GxCH1g80OYnh7+6nLmtwinweD2t490F7KudOouAdlNbkB04fg4E+UkefzJ6VWhlERVyA0pROL5XVoztFqGmVm8pV3lvruedVZ/IJTSKIckdl9nbfspWuzLDL9G6N6QJpf0vyxiJWP4Mf6ZDKzWs6GnFawWbc21wS5i+4s3XJKSH5mmGsPIAN/Q4na2SlAczvRTy/c1WhaWSFWh/MXQ5LAgJWboJVQ6MO+FgVWFF4bekSHYteOfm2zEoRmjhZ+gSfmvgCZP5o5CyvU0WUW1ZPfJZFEopAjDZhy/iAH7xPJLhGKqJFhRLDVhXeTtU8Ff/mt45Q3/Aac2Z5CD00+rAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"db query\"\n        title=\"db query\"\n        src=\"/static/49a778ffd8dd4ee91e6178fdd5ae16fa/e85cb/db_query.png\"\n        srcset=\"/static/49a778ffd8dd4ee91e6178fdd5ae16fa/12f09/db_query.png 148w,\n/static/49a778ffd8dd4ee91e6178fdd5ae16fa/e4a3f/db_query.png 295w,\n/static/49a778ffd8dd4ee91e6178fdd5ae16fa/e85cb/db_query.png 480w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Ok congrats folks, our first part is done ;-)</p>\n<p>Let’s move on now, and start the AWS part.</p>\n<h2>Step 2: Creation of the RDS Instance</h2>\n<p>Open the Amazon RDS service via <code class=\"language-text\">Services / Databases / RDS</code>, and then hit “Create Database”.</p>\n<p>Let’s keep the “Standard create” option and select “MySQL” for the engine options.</p>\n<p>For the “Template” part, I will select “Free Tier” because it’s a sample project for a demo, but you can adapt the template based on your needs.</p>\n<p>In the Settings part, I will change the DB instance identifier by: <code class=\"language-text\">my-rds-db-id</code>. For the credentials I will provide a password: <strong>MySuperPassword;2021</strong>, and let the “master username” as is (<strong>admin</strong> by default).</p>\n<p>Chose your DB instance size based on your requirement (for this example I will let the default one: db.t2.micro), same for the Storage part.</p>\n<p>I will leave the other default settings (Availability &#x26; durability, Connectivity, Database authentication) but the important part will be on the Additional configuration part.</p>\n<p>Open the Additional configuration part, and provide the Initial database name: <strong>my<em>rds</em>db</strong> and leave the rest as is.</p>\n<p>Once is done, click on “Create Database” and it will take a few minutes to provide your DB.</p>\n<p>Meanwhile, we will update a little bit our <strong>application.properties</strong> to change the server port and the spring Datasource lines. The server configuration/spring should look like :</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># Server configuration\nserver.port=5000\n\n# Spring\nspring.datasource.url=jdbc:mysql://${RDS_HOSTNAME}:${RDS_PORT}/${RDS_DB_NAME}\nspring.datasource.username=${RDS_USERNAME}\nspring.datasource.password=${RDS_PASSWORD}</code></pre></div>\n<p>Once it’s done, we will build our app by running a: <code class=\"language-text\">mvn clean package -DskipTests</code></p>\n<p>Your artifact should be generated in your <code class=\"language-text\">&lt;&lt; project path &gt;&gt;/target/&lt;&lt; project app name &gt;&gt;-0.0.1-SNAPSHOT.jar</code> like below :</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a307c96f99c94a9a730601abf7076b8b/774b6/jar.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.43243243243243%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABJ0AAASdAHeZh94AAAA7UlEQVQY03WRXY+DIBBFRwWtIijU+pGsZpPabfat///P3V5oms12uw8nAyRzGC5yPu+Y5hl93yN4jxAC8jxHUShSJJRSCa114rl/JcsyyL5fMFN4Oo0Yxwme0rg3xqCu61/Ei2LTf4gIZFkWWOdwYIO1LjVaa5Mw1rY1pE1o/TP1O5JQHQvoUaGcFMQI6uwALwGV4roRSoUyrutH7bpHTc3vCOEbw3CFczPKsudNJbK8YJYrzzfm+kGBpahjHAFNY9I0z+f/EXp/Y8POSa7kE1V15NMa5rhhXb+Y7QbHKIZhSDlHcYwjnsWPeBXeATwQhOsxt3GmAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jar created\"\n        title=\"jar created\"\n        src=\"/static/a307c96f99c94a9a730601abf7076b8b/fcda8/jar.png\"\n        srcset=\"/static/a307c96f99c94a9a730601abf7076b8b/12f09/jar.png 148w,\n/static/a307c96f99c94a9a730601abf7076b8b/e4a3f/jar.png 295w,\n/static/a307c96f99c94a9a730601abf7076b8b/fcda8/jar.png 590w,\n/static/a307c96f99c94a9a730601abf7076b8b/774b6/jar.png 738w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Ok, so I think it’s time to create our Elastic Beanstalk application. Let’s navigate to this service via <code class=\"language-text\">Services / Compute / Elastic Beanstalk</code>.</p>\n<p>Hit <strong>Create a new environment</strong>, keep the default selected environment tier (Web server environment).</p>\n<p>Provide an application name: <em>my-super-api</em> (for me)\nChose a domain and check is availability:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/db83dfcddf92439fc5a3a62bfcb2945a/83e77/elb-env.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.621621621621614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABJ0AAASdAHeZh94AAABD0lEQVQoz5WRiW6DMBBE/f+/2JSQNFzm9sXNZNeKW1o1VWrpaTHYs7OD6JVCkqZIkkCCj9uNSDCOI+Z5xjRNLzESQpFgHF/wHkXEGZfrFW+nE6JzjKqqUDcN2rb1NPQc9k2A9iWd67rONxfOOWzbhn3ffV3X9RPflVyG7s9chTPLskBYEpRSIstyZHkBax14hSb/RQykzjnKsiL7re/I7pYD6y915WmO0LuNBdkh58DCvF5xwZdnGu8Ij+sd8vxKaeSFpGD7rwx/Ogguth1sIqOY8rJESjUtCsi6DiMPsIODMga91oTxY3GGARbb9u+ZPltCO41al/QzLAyJukfVJG6NhaLvmSnhlkck2P+M5g7I67xskU63JAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"elb env info\"\n        title=\"elb env info\"\n        src=\"/static/db83dfcddf92439fc5a3a62bfcb2945a/fcda8/elb-env.png\"\n        srcset=\"/static/db83dfcddf92439fc5a3a62bfcb2945a/12f09/elb-env.png 148w,\n/static/db83dfcddf92439fc5a3a62bfcb2945a/e4a3f/elb-env.png 295w,\n/static/db83dfcddf92439fc5a3a62bfcb2945a/fcda8/elb-env.png 590w,\n/static/db83dfcddf92439fc5a3a62bfcb2945a/efc66/elb-env.png 885w,\n/static/db83dfcddf92439fc5a3a62bfcb2945a/83e77/elb-env.png 889w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>For the platform, let’s select the Java one with the Corretto platform branch :</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/76bf282bd01da7e653c7da07808f75f6/748b0/elb-platform.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.16216216216216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABJ0AAASdAHeZh94AAABcklEQVQoz5WS6W6DMBCEef+na6X8qEqjXiSEw9z4wDbTXXMoStuoRfq02KyH2V1H/TDgJY4RP8cY+h7eOdhp+hlr7zJRTiSVwmhnwmOcHAZjISlqN0MR0nlI+mYmC601tDF7NCv8rmhvItGINw65xMMxweH4gcf4HfG5RFJLfNYj0laiVB7tKJGkKV6TJPB2OuGUZYFLUQQGKRGN5LB1wIUOJqJDUvUkpPCUDTgKiVpZVJoEKTkrl4NZWe4i1+sgyCUXTYdmVKBzxAxDTDOIpWxNZTvvYbm/V7iVbe0pP+LaS/pD3w/gx18lMt5v+F+ZSYj7uA9FVBXqpkHTdsEJP/MV/Gfe/w0WDQYoBodVXeOcXsipQEFulyhCZHq+TndEWTBMfXNYUENLISCIYJ3Gb9YEhtf3HLpbh3y5syxHntPE8hySphXKJlcboV8cb1l7aEIP6R6OdJibycJ8YZXSu/1/sZXcdl1w+A3qG0/+zwxL/AJfbaPXpbyUOgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"elb platform info\"\n        title=\"elb platform info\"\n        src=\"/static/76bf282bd01da7e653c7da07808f75f6/fcda8/elb-platform.png\"\n        srcset=\"/static/76bf282bd01da7e653c7da07808f75f6/12f09/elb-platform.png 148w,\n/static/76bf282bd01da7e653c7da07808f75f6/e4a3f/elb-platform.png 295w,\n/static/76bf282bd01da7e653c7da07808f75f6/fcda8/elb-platform.png 590w,\n/static/76bf282bd01da7e653c7da07808f75f6/748b0/elb-platform.png 868w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>And finally, we will upload our artefact built previously in the Application code part :</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0d6507efec9f9d9725d97d75b8db719f/6e9ba/elb-app-code.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95.27027027027027%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABJ0AAASdAHeZh94AAAB/0lEQVQ4y51UiZbaMAz0///fdpe3hS0J5D7sHM6dqaQklNJytHlvsHFgPJJGUmVVwQ8CBEGIIAwRRTGiOEbbtmj+A6osS7x9e8f3/QGHwxccxyG4GIYBXdcJ+r5/Gaqjj3me0TSNqLK0Msk0TXLO4P2rUKyEwz6SKsd18ePo4Oz5claWFQrCOI549VGbqspa1AzaD0TAJHyZYPu+glXfJez75U8FKapWQsaWZN7bFfyewWni8Mb1omuoScKZkeQ5wiRBlGUI4gQxrZnWSAnZDfgspd//DcrYFqGxMDpHrg2MMajqGuMdBRfcU6jrDm5SwPfO5MNIfBiTQmuXMOt6ya2ET3u+TFDV4HT9kcN5Iua+k8p6foAsy+X2lqzDBduK1sh+sdOm7tpaG1RPBeGbIlLFHbKsCTLKBytj+5iilJVVb4TXxOM4XSA+5MOCOibPOY9aUFNYF1Pzuu5/Eax5vIFiX7UU0unswaeQT6cz9XYk+bgN55H/fsthWHbY+yliGg5ZrsWXrOYe6SNIyP00IzclVThCSv7jXD1S+LhTVjVJmiJcRxeTbgpvn2dhq2VM9WSbQMg4jyEpLYpC7MLjja2kyfRsoacKuWLGahzcPZGFNG2OeP/Y4WO3w+fnngZvIP70fF9InxIOA1V5sNBVhobasCK/sWUsDwrqjH8N+Sc3VcjNqD45MgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"elb app code\"\n        title=\"elb app code\"\n        src=\"/static/0d6507efec9f9d9725d97d75b8db719f/fcda8/elb-app-code.png\"\n        srcset=\"/static/0d6507efec9f9d9725d97d75b8db719f/12f09/elb-app-code.png 148w,\n/static/0d6507efec9f9d9725d97d75b8db719f/e4a3f/elb-app-code.png 295w,\n/static/0d6507efec9f9d9725d97d75b8db719f/fcda8/elb-app-code.png 590w,\n/static/0d6507efec9f9d9725d97d75b8db719f/6e9ba/elb-app-code.png 731w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Let’s create your environment, It will take a few minutes to do it.</p>\n<p>Once it’s created, click on your environment and go to the configuration (on the left side menu), and then edit the <strong>Software</strong> category part.</p>\n<p>Scroll down and we will need to provide some environment properties like below :</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5b43ce69b9747ff54e9ceb6844a5e8b3/951a4/elb-env-props.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.72972972972974%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAABHUlEQVQoz3VT2ZaFIAzj/3/zevXFFVRW7ZBC53ic4SEWMaRJVTXPM30+HXXfL3VdR8uy0HEctAP7znXUlnYb6EqJQogUYxsKhwHvPTlni1gV4lrXWhsyxpC1hdOCWteV+r6naZrYHe7f0FrTOI40DAPzsLdtG+PJw3kFZ3gAFylHegMx7vvmtc48OC1pHJ3nmUcQfrnYVxIBD1pIPLtAW3ULA4gvoxIemiibL5gTNuBGqgD313Vx5VhVVBo9zxSHWRDZTRVtOQQZruAC+I/HDnGRIbcExSGcPYFkaCKN2KEISgyJ8FxD0CPyZmjJ0HueXcyuQyJX4eNFzocSGYKoT7G3Q3THSyicjPgXzlWHcAfbra9fIuMzSan9l4DzA+rSV7t89Cp+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"elb env props\"\n        title=\"elb env props\"\n        src=\"/static/5b43ce69b9747ff54e9ceb6844a5e8b3/fcda8/elb-env-props.png\"\n        srcset=\"/static/5b43ce69b9747ff54e9ceb6844a5e8b3/12f09/elb-env-props.png 148w,\n/static/5b43ce69b9747ff54e9ceb6844a5e8b3/e4a3f/elb-env-props.png 295w,\n/static/5b43ce69b9747ff54e9ceb6844a5e8b3/fcda8/elb-env-props.png 590w,\n/static/5b43ce69b9747ff54e9ceb6844a5e8b3/efc66/elb-env-props.png 885w,\n/static/5b43ce69b9747ff54e9ceb6844a5e8b3/c83ae/elb-env-props.png 1180w,\n/static/5b43ce69b9747ff54e9ceb6844a5e8b3/951a4/elb-env-props.png 1355w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>You will find the <strong>RDS_HOSTNAME</strong> value in the RDS section, select your RDS Database, and then find in the Connectivity &#x26; Security tab the endpoint value.</p>\n<p>Save these properties, and now we will need to create a new security group for our ELB Security Group to authorize the communication between MySQL and our ELB Instance.</p>\n<p>For that, let’s navigate to <code class=\"language-text\">Services / Compute / EC2</code>, and then click on “Security Groups” on the left menu.</p>\n<p>Create a new security group, provide a name and attach it to your default VPC or the VPC you created (if you created a custom one).</p>\n<p>The next step is to provide an Inbound rule, that will allow the TCP 3306 from our Elastic Beanstalk app. Chose a type “MySQL / Aurora”, it will automatically provide the protocol TCP and port 3306, and then for the source select the EC2 Security Group associated to your ELB app (you can find it in the ELB Section / Configuration / EC2 security groups) :</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/314bfbf64aa0d9fff16354f58da8fe77/b4904/security-group.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.08108108108108%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABJ0AAASdAHeZh94AAAA/UlEQVQY0z1Q2Y6DMBDj//9vH1ZaadVWamlZArkvwOsJB5LlYTKZ2O6UUnh/BvgQkXNGSkTeUWvde0SRupRjJiGEgEg+e+XgzlqHSRus69qG1Kwx818RKRc456Ctx+QCTMxwdYXxHsYYiki8t2HdNsQY29IusPBctLG5cOmyLA1VQFVSy2PKeLzeA0QAR69PzgQyK+iGvxF93zeVsjxeSLs11sLPYcTX9w9u9zsdaGitG3uqPWeEu1nvFuUVUSqLjbWYjWU+lYpsuzgah9/bAx/mLTGoaYJx/nIgAprlZouNZpmHpezSJexy2JALMzN8PF8tO8msWSVvB854/gFUDtH+vIuI1AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"sgs\"\n        title=\"sgs\"\n        src=\"/static/314bfbf64aa0d9fff16354f58da8fe77/fcda8/security-group.png\"\n        srcset=\"/static/314bfbf64aa0d9fff16354f58da8fe77/12f09/security-group.png 148w,\n/static/314bfbf64aa0d9fff16354f58da8fe77/e4a3f/security-group.png 295w,\n/static/314bfbf64aa0d9fff16354f58da8fe77/fcda8/security-group.png 590w,\n/static/314bfbf64aa0d9fff16354f58da8fe77/efc66/security-group.png 885w,\n/static/314bfbf64aa0d9fff16354f58da8fe77/c83ae/security-group.png 1180w,\n/static/314bfbf64aa0d9fff16354f58da8fe77/b4904/security-group.png 1768w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Finally, let’s go to your RDS Database, click on <strong>Modify</strong> :</p>\n<p>Leave all as is, but in the “Connectivity” part, remove the default security group and add the new one created previously :</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/27f0aac908a2f4bb98e276b007649fa3/91b29/rds-sg-update.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.05405405405405%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAABMElEQVQoz5VS2Y6DMAzk/z+z+1COACGBHFyznixBtNtKbaRRDLIn47GLXmtUdY2yLGGMRQgB3vvPIfnOOQzGYJomFMMwoKoq3O8lrB2xrivmef4KFNH1OhEXZNV6SGTbtiVC3p9g33dshMQ8MUYUZK3qBqrtUuuGxJJE4pUPHI+ckO8ghVGU5UNiHqpNClXbohfJ/LEsyx+kON8seAD2kyjjJByFsFEtVNehFz/tOIm5LmE84mwD1VF9PLy7kp6E2gX8KC3ocau7FJtwJB/IPmXf8gMvCa3zqLVFM1i5DYyf4ZeVmf9bvRRfvXv0cBxRyspwdTiglJAHkYdyGQ6VcZpvW45xhpMFJeiN90EKt7fq9kv7zycRGiutNkoGo9LN1SH5LBOOL5Y4PsXx/Lekul/30V1C9F7p0wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"rds sg update\"\n        title=\"rds sg update\"\n        src=\"/static/27f0aac908a2f4bb98e276b007649fa3/fcda8/rds-sg-update.png\"\n        srcset=\"/static/27f0aac908a2f4bb98e276b007649fa3/12f09/rds-sg-update.png 148w,\n/static/27f0aac908a2f4bb98e276b007649fa3/e4a3f/rds-sg-update.png 295w,\n/static/27f0aac908a2f4bb98e276b007649fa3/fcda8/rds-sg-update.png 590w,\n/static/27f0aac908a2f4bb98e276b007649fa3/efc66/rds-sg-update.png 885w,\n/static/27f0aac908a2f4bb98e276b007649fa3/91b29/rds-sg-update.png 983w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Click on Continue, and do not forget before modifying your DB instance to select <code class=\"language-text\">Apply immediately</code> option. Then click on Modify DB instance.</p>\n<p>Ok, guys, we are done with the AWS configuration part, so the latest step is to test our API :)</p>\n<p>Let’s go back to your ELB App, and copy your environment URL. For me, it will be: <code class=\"language-text\">http://my-super-api.eu-west-3.elasticbeanstalk.com</code>.</p>\n<p>Let’s do the same thing we did in local, by opening first the “init DB endpoint”: </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">http://my-super-api.eu-west-3.elasticbeanstalk.com/api/init-db\n\n# and then check the songs endpoint :\nhttp://my-super-api.eu-west-3.elasticbeanstalk.com/api/songs</code></pre></div>\n<p>Finally, we can see our data:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7f6162128c4bf5e44ad3153a96cbf1a5/4597d/db_aws_query.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 120.94594594594594%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAABJ0AAASdAHeZh94AAACyElEQVQ4y41V2XKjMBDk/z9vX5ONcWwucwoQIATqnRbGcbZsJ1R1zSBr2nO0RKCUQlVVuFwuqOsafC/LEnmeoygKFGJvviC/vud367ttmgZB13UohTBJU79AXGRDmibIBHEcI0kSj1T27D7B37Is8zaKIp9IoFSDWggbya5rW0zjiF7+pO0HdMOM2RiM4wQjdhgG9H0PrbW3+9ooMfM8Y5omyTAJ0cYfUNFf6OyIeRy2QD1CT3bbKIG0DCQYSGut9T6Jl2XxCJZ1xW8f59yNlCQ72e77DMnKPjKDPWi3V/f2cC8HwAFyeIxrpU0EfSKYJW0+q2S6g4G0zoOlbOvbn2y433+PgMMgmDb/gQ3f/Baq01CaJU1+CMyE/d3LfISgS4/o0xBGd7L5qz8M1AMHM/t3rnNtkqFxGM8QUCLR+SQaKkQ+JSqxTV2JvlKopobuOyRxhEZ6NrYVdPS2j+jh4AIKmcI8J3JSeoNGz1CDRUO/v/NlvRVfie2n9SkCHrvwcEBR1hjnVUa/SGkWg1khr5gXwK4bzLK9G+ueIuD4eWyMaIiPaQc0YYau6lFdgDJzYp1YQFUy3eW1bn3JJGTTPWE/ofrIMCiNXEjSs0ORAkW2+qbfS+cRfIbn89kTUn/zZKDzFmaU42acQARtqVP3TfQvMzwej14SPC3WWCFYYG+ludtEN57XpAHvwM/PT3/LbCWPclGU6BqNugDaRvonvezb1ZOR52WGJAzD8NbDSYaS/jmiK1vEJyAKgeObQ3JaReDLj6SekCXzpmAPrZHrSgYyjXIXzjyfW7C99vHXhPsluVwnuazuvx66b9fYy5IPIuxbyWpA8RZDlT2yaNPhJYbvo6rlJrLr66Fwyvc9NN2I8j2BrnuvwzwBzgcnn4e9f+5nwl02/i4U2YxyStjD5SqdZREifMnoRx2eTif/tVsffg4e9+4Z6T9PZEw/V11AdwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"db live query\"\n        title=\"db live query\"\n        src=\"/static/7f6162128c4bf5e44ad3153a96cbf1a5/fcda8/db_aws_query.png\"\n        srcset=\"/static/7f6162128c4bf5e44ad3153a96cbf1a5/12f09/db_aws_query.png 148w,\n/static/7f6162128c4bf5e44ad3153a96cbf1a5/e4a3f/db_aws_query.png 295w,\n/static/7f6162128c4bf5e44ad3153a96cbf1a5/fcda8/db_aws_query.png 590w,\n/static/7f6162128c4bf5e44ad3153a96cbf1a5/4597d/db_aws_query.png 631w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Congrats guys, your API is now working on AWS :)</p>\n<p>Let’s summarize what you achieve during this tutorial :</p>\n<ul>\n<li>You created a REST API with SpringBoot Framework in Java 11</li>\n<li>You created and configured an RDS Instance with a MySQL Database in AWS</li>\n<li>You created an Elastic Beanstalk application</li>\n<li>You configured a Security Group to allow exchanges between your RDS Instance and the ELB App.</li>\n</ul>\n<p>I hope it was helpful for you, see you next time!</p>","frontmatter":{"title":"Deploy your Spring Boot Rest API with MySQL on AWS Elastic Beanstalk","date":"January 13, 2021","description":"Let's have a look at how we can deploy our spring rest API with MySQL on AWS"}}},"pageContext":{"slug":"/deploy-spring-rest-api-with-rds-db-on-elb/","previous":{"fields":{"slug":"/deploy-sonarcube-on-aws/"},"frontmatter":{"title":"Deploy SonarQube on AWS EC2 Instance"}},"next":{"fields":{"slug":"/ci-cd-cloudfront-s3-angular-app/"},"frontmatter":{"title":"CI/CD for Angular app with AWS Codepipeline, Cloudfront, S3."}}}},"staticQueryHashes":["1246554614","2841359383"]}