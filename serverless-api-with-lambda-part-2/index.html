<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}</style><style data-href="/styles.491a16106869c73de5f8.css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-191cc9f50f3b76b9617cb383f19acb7d.woff2) format("woff2"),url(/static/montserrat-latin-100-370318464551d5f25b0f0a78f374faac.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-bdeaeb79db315697bd173a55b097dc18.woff2) format("woff2"),url(/static/montserrat-latin-100italic-ecf7d49386e8f265878e735db34a7c4b.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-85d5ef9db7f2dc6979172a4a3b2c57cb.woff2) format("woff2"),url(/static/montserrat-latin-200-1fc98e126a3d152549240e6244d7e669.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-49095760a498d024fe1a85a078850df9.woff2) format("woff2"),url(/static/montserrat-latin-200italic-fe46cf8b9462c820457d3bf537e4057f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-7c3daf12b706645b5d3710f863a4da04.woff2) format("woff2"),url(/static/montserrat-latin-300-8dc95fab9cf98d02ca8d76e97d3dff60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-f20b178ca2024a5eac8e42e6649db86c.woff2) format("woff2"),url(/static/montserrat-latin-300italic-3fe16939288856e8e828fa2661bf2354.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-bc3aa95dca08f5fee5291e34959c27bc.woff2) format("woff2"),url(/static/montserrat-latin-400-8102c4838f9e3d08dad644290a9cb701.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-5cad650422a7184467af5a4d17b264c4.woff2) format("woff2"),url(/static/montserrat-latin-400italic-d191f22af3bb50902b99ac577f81a322.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-92d16e458625f4d2c8940f6bdca0ff09.woff2) format("woff2"),url(/static/montserrat-latin-500-8b763220218ffc11c57c84ddb80e7b26.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-47bfcca6b69d6a9acca7a8bff17193e2.woff2) format("woff2"),url(/static/montserrat-latin-500italic-72c01f753c3940c0b9cb6bf2389caddf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-6fb1b5623e528e27c18658fecf5ee0ee.woff2) format("woff2"),url(/static/montserrat-latin-600-7c839d15a6f54e7025ba8c0c4b333e8f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-60789af1c9338ed1a9546722ec54b4f7.woff2) format("woff2"),url(/static/montserrat-latin-600italic-f3d4de8d0afb19e777c79032ce828e3d.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-39d93cf678c740f9f6b2b1cfde34bee3.woff2) format("woff2"),url(/static/montserrat-latin-700-80f10bd382f0df1cd650fec59f3c9394.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-ba136d97b14e82284dd595e257f11c47.woff2) format("woff2"),url(/static/montserrat-latin-700italic-8c98142b425630821139c24bd1698700.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-b7018be9ed6cd94da8b6675b3a468c3b.woff2) format("woff2"),url(/static/montserrat-latin-800-9a9befcf50d64f9d2d19d8b1d1984add.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-540ffdd223d1a9ad3d4e678e1a23372e.woff2) format("woff2"),url(/static/montserrat-latin-800italic-897086f99f4e1f45e6b1e9368527d0bc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-58cd789700850375b834e8b6776002eb.woff2) format("woff2"),url(/static/montserrat-latin-900-26d42c9428780e545a540bbb50c84bce.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-451157bc8861fe54f523b3669a3def71.woff2) format("woff2"),url(/static/montserrat-latin-900italic-a8ec4957e1c24f5793305763ad9845b3.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.22.11"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=edf3d310d67f8284a562bc3a58c3e761"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=edf3d310d67f8284a562bc3a58c3e761"/><title data-react-helmet="true">Create a Serverless API with AWS - Part 2 | Jstw Blog</title><meta data-react-helmet="true" name="description" content="How to create a serverless API in AWS - Part 2 (The Lambda functions)"/><meta data-react-helmet="true" property="og:title" content="Create a Serverless API with AWS - Part 2"/><meta data-react-helmet="true" property="og:description" content="How to create a serverless API in AWS - Part 2 (The Lambda functions)"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="jstw"/><meta data-react-helmet="true" name="twitter:title" content="Create a Serverless API with AWS - Part 2"/><meta data-react-helmet="true" name="twitter:description" content="How to create a serverless API in AWS - Part 2 (The Lambda functions)"/><link as="script" rel="preload" href="/webpack-runtime-f08a2b5eac2916abced9.js"/><link as="script" rel="preload" href="/framework-81e6052b3504df28bf0b.js"/><link as="script" rel="preload" href="/styles-ae6d046c35c187471a06.js"/><link as="script" rel="preload" href="/app-2133e6e763bae3842737.js"/><link as="script" rel="preload" href="/commons-81f99fe6b62df718b8c0.js"/><link as="script" rel="preload" href="/fab8c9364b01cebfd3503fc18011994750f493ff-90634a6f70c4656f59bc.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-9ca39ad9e1bc5fd245d7.js"/><link as="fetch" rel="preload" href="/page-data\serverless-api-with-lambda-part-2\page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data\app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><header><h3 style="font-family:Montserrat, sans-serif;margin-top:0"><a style="box-shadow:none;color:inherit" href="/">Jstw Blog</a></h3></header><main><article><header><h1 style="margin-top:1.75rem;margin-bottom:0">Create a Serverless API with AWS - Part 2</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem">May 30, 2020</p></header><section><p>Hey folks! If you didn’t read the previous post, I suggest you to <a href="./../serverless-api-with-lambda-part-1">read it</a>  before continuing. If you did, let’s continue :)</p>
<p>Ok so now, we are our beautiful database which only asking to be queried :D </p>
<h3>First step: define our Lambda Role</h3>
<p>Yeah I know, you wanted to start coding a little bit! But you have to wait a little bit :)</p>
<p>If you remember in our architecture schema :</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/a712c81b450295927c99906ae5442c82/f349c/architecture.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 41.21621621621622%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAACBUlEQVQoz2PQNHVmUDd2ZKioaWKIyytnAAH+0HIGNr9qdm7feg6ugGoOfv9Cdga508yT0pylD2aoOtsGhHIx+HazcfmXsbMFVLHLRUzkAmJOVv8qDgYYUNaxgLOZ/euZ2AIr2WD8X80mTCD6bLGh5+1S7acfExk4Qfz//xlQAKN3JQeDkp4No6KuDTNIICo6hqkkJZKJ16uAicExlxUkZubhxVRbV8cd3ryI8ZoGA+PcNFtRBjSQVXrdNq/8poVEUi07g7aZq6qWmYt5eGwqZ3lZqVhxXoVEXq+fYKrnXsva0LNXy4IP+IBdovyf4USxqdOdYvVDqzOtBJNal3F31iVx1tZPEI3PvPoxIev6A5GEMnYGHQtXTWA4eodFxQtUlJeJl+RXSGQ3RIileO80rQk5vbss6IAjzCUnczRlLxTrp0ypzhQsqu/iqa8u5urs6udOKzibnVF4LkUgsY6dYeuyyYxJyclsQuJyDKZm5kyO2mKMDHrRzAy+wawMygysDK4MDF1VZVwMk/4zHS8y0b9RpD7hgxMDCwM24FbHhlWcIbydkTsAU/JioY7hrTLdxb9y2FDk/kNjhyOgkp3BLziSwcMvlMHBzZfBNTodLMEdUMbI6lfFyeFbx87mX83B7F/Nzu9fxM4gfREceQx+rezAJMPB7FfFzgLEXAEVwORVAWJzAgByAJMyNZh8PwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Architecture"
        title="Architecture"
        src="/static/a712c81b450295927c99906ae5442c82/fcda8/architecture.png"
        srcset="/static/a712c81b450295927c99906ae5442c82/12f09/architecture.png 148w,
/static/a712c81b450295927c99906ae5442c82/e4a3f/architecture.png 295w,
/static/a712c81b450295927c99906ae5442c82/fcda8/architecture.png 590w,
/static/a712c81b450295927c99906ae5442c82/efc66/architecture.png 885w,
/static/a712c81b450295927c99906ae5442c82/c83ae/architecture.png 1180w,
/static/a712c81b450295927c99906ae5442c82/f349c/architecture.png 2002w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Our client will query our API Gateway, and the API Gateway will invoke some Lambda Functions. Fina the lambda functions will query the DynamoDB table and returns some results.</p>
<p>To allow our Lambdas to do that, we will need an IAM role which allow these API actions.</p>
<blockquote>
<p>If you want to know what are the IAM roles, why we need them, I’ll provide you the link to the  <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html">IAM AWS Official Documentation</a>. </p>
</blockquote>
<p>Navigate to the ÌAM Service through <code class="language-text">Security, Identity, &amp; Compliance &gt; IAM</code></p>
<p>Before creating our new role, we will create our policy which will be used in our IAM Role. Create a new policy by clicking on <code class="language-text">Policies &gt; Create Policy</code>.</p>
<blockquote>
<p>By default, an explicit deny is set to all resources created in AWS. You must grant permissions via IAM Policies. and attach them to your resources. In you want more informations about IAM Roles, Policies, Groups, have a look <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id.html">to the officiel documentation of IAM</a>.</p>
</blockquote>
<p>Choose the <code class="language-text">JSON</code> editor tab. Once it’s done, you can copy paste this following policy :</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"Version"</span><span class="token operator">:</span> <span class="token string">"2012-10-17"</span><span class="token punctuation">,</span>
    <span class="token property">"Statement"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span>
            <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"dynamodb:Query"</span><span class="token punctuation">,</span>
                <span class="token string">"dynamodb:DeleteItem"</span><span class="token punctuation">,</span>
                <span class="token string">"dynamodb:GetItem"</span><span class="token punctuation">,</span>
                <span class="token string">"dynamodb:PutItem"</span><span class="token punctuation">,</span>
                <span class="token string">"dynamodb:Scan"</span><span class="token punctuation">,</span>
                <span class="token string">"dynamodb:UpdateItem"</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"arn:aws:dynamodb:*:*:table/*/index/*"</span><span class="token punctuation">,</span>
                <span class="token string">"arn:aws:dynamodb:&lt;&lt; put your region here >>:&lt;&lt; insert your account id here >>:table/blog"</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">"Effect"</span><span class="token operator">:</span> <span class="token string">"Allow"</span><span class="token punctuation">,</span>
            <span class="token property">"Action"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"lambda:InvokeFunction"</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"Resource"</span><span class="token operator">:</span> <span class="token string">"*"</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<blockquote>
<p>Do not forget to change the <strong>region</strong> and the <strong>account id</strong> inside the <strong>Resource arn</strong> bloc. The region is the one selected in the AWS Console nav bar, and you can find your account id by checking in your IAM Dashboard, the IAM users sign-in link.</p>
</blockquote>
<p>Finally, you can hit the Next button to review your policy, add a name and create your policy. It should should looks like this :</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/36efbd4cccb2c7b9b914ffd8cca06d30/68638/policy.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 37.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABJ0AAASdAHeZh94AAAA70lEQVQoz5WSyW6EMBBE/f8fiOAQEAwmQDxiM6uBylQnJnOIspT0EG3h6qJt1TQNhmHAvu9Y1xXbtuE7necp/CbFxzzPYmqMQdu2mKYJ42gfjAKbHMdxmf6Ecm4Ts2VZPo0+TKy1F6xp+BeUj8qCSZ5xzgn/kaIRExKmYVLCeRKm67pO4Dd931813/1eXys/6Lqu8RLHqKoKZVkijhOkaSbreZ4LURQhThJoraVO0xRBECAMQ2TZDUVRfBmyS3bTYljVBvr1QfkmXf1MeWB+psQn83/HtcvQzg73fr2uCFMac5fr5MUrxk1eHAkP8lnvzhdtA4xVHvYAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="IAM Policy"
        title="IAM Policy"
        src="/static/36efbd4cccb2c7b9b914ffd8cca06d30/fcda8/policy.png"
        srcset="/static/36efbd4cccb2c7b9b914ffd8cca06d30/12f09/policy.png 148w,
/static/36efbd4cccb2c7b9b914ffd8cca06d30/e4a3f/policy.png 295w,
/static/36efbd4cccb2c7b9b914ffd8cca06d30/fcda8/policy.png 590w,
/static/36efbd4cccb2c7b9b914ffd8cca06d30/efc66/policy.png 885w,
/static/36efbd4cccb2c7b9b914ffd8cca06d30/c83ae/policy.png 1180w,
/static/36efbd4cccb2c7b9b914ffd8cca06d30/68638/policy.png 1510w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Let me explain a little bit what this policy does. The first <code class="language-text">Effect</code> will allow our resources (lambdas) to make some basics dynamodb execution calls like Query, Scan or PutItem etc. For this specific actions, we specify also the ARNs of our DynamoDB table/indexes.</p>
<blockquote>
<p>You should follow the <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html#grant-least-privilege">Principle of Least Privileges</a> in AWS. It’s one a best practice to follow.</p>
</blockquote>
<p>I will not explain the second effect bloc (the lambda:InvokeFunction) for now. I’ll keep it for later ;)</p>
<p>Ok so now our IAM Policy has been created and we can finally create our IAM Role. Go back to the IAM Dashboard by clicking on <code class="language-text">Services &gt; Security, Identity &amp; Compliance &gt; IAM</code>. Click on <code class="language-text">Roles &gt; Create a role</code>.</p>
<p>Once is down, keep the first selected option (type of trusted entity) which is normally AWS service, chose the use case <code class="language-text">Lambda</code> and click to <code class="language-text">Next: Permissions</code>. Now we just have to search our policy previously created, so just type the name of the policy you just created and select it.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/d9777715be2c3552e071d8ef5fe52d59/fe8a7/policy_role.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 31.756756756756754%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABJ0AAASdAHeZh94AAAA+UlEQVQY04WQWW7DMAxEdf9L9RAF3Dau6ySSl1irDa/xMiXt9KP5CYGHoQiRHFC0bYsQApqmwTzPWNcV27bhVfx9ScoWb5GhbMWd+kXXdXDewzkHay2MMajr+t9whvNntm3FNC/oxhnb469oqNkavTvs+x68gJVZluXh5rVjjmmaICpjEadXWB92y4ezwxEPnAnWcRyPRcNAOuw6cI2UzXg6m9YGQuY3RPEF30kKeTnD6ArBO3hnCbcT6CRlWUBJiUwxas/PaQpF7/h0wudHRLUrRGFqyMIgSiTekxyxMpA3B/VEVnnkOiAjWGVp8fUjoahe2gY8R4cWv315zHfWXHdeAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="IAM Policy Role"
        title="IAM Policy Role"
        src="/static/d9777715be2c3552e071d8ef5fe52d59/fcda8/policy_role.png"
        srcset="/static/d9777715be2c3552e071d8ef5fe52d59/12f09/policy_role.png 148w,
/static/d9777715be2c3552e071d8ef5fe52d59/e4a3f/policy_role.png 295w,
/static/d9777715be2c3552e071d8ef5fe52d59/fcda8/policy_role.png 590w,
/static/d9777715be2c3552e071d8ef5fe52d59/efc66/policy_role.png 885w,
/static/d9777715be2c3552e071d8ef5fe52d59/c83ae/policy_role.png 1180w,
/static/d9777715be2c3552e071d8ef5fe52d59/fe8a7/policy_role.png 1223w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>You can now click on the <code class="language-text">Next: Tags</code> and click on <code class="language-text">Next: Review</code> to finally give a name to your role and create it.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/0e4fe6d90009bcd47c37629bd3129650/85053/create_role.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 64.1891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABJ0AAASdAHeZh94AAABV0lEQVQ4y41SW27DIBDk3D1Dz5Lv3qH//W+rVrXs2BgMBvOYsiR2wI7SIo12bbHD7swypRQ456DovcejE2M8fFON9w7GOpxef8CGYcD5fMayLBsul2pQcbySlAghbFDGgRljME1ThaZp0HVdQpvynwx6mDpJlLtO667ZfizqZp5nWGvBR4l+GMGFxDCKDMpHkR7WM5yPNUIEK9uns2oqZIpSpzhhTJBK55jz6ZLbxWeSlcy4UHdYjkKZth42XaKLazQLwedoXcz/L4j5H0MhNB3nkmNJVzJHFbrK1BF1a4zdEMiUHQ6EpB0ZQiaINBoXKmtGUtBDfx22X4PVGJ2MUTZCzAF6iZUsNxzXqNKQ3O37PptCY2p1Q7n4e5KKUGudCaSU24JSYbmwKyrTDgteaLiO+ajgnjR3NSTx27b9F0m8OklL1YwGfJrRfH/i7b3D0+kDzy9f+AUgYvu1hTRtJwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="IAM Role created"
        title="IAM Role created"
        src="/static/0e4fe6d90009bcd47c37629bd3129650/fcda8/create_role.png"
        srcset="/static/0e4fe6d90009bcd47c37629bd3129650/12f09/create_role.png 148w,
/static/0e4fe6d90009bcd47c37629bd3129650/e4a3f/create_role.png 295w,
/static/0e4fe6d90009bcd47c37629bd3129650/fcda8/create_role.png 590w,
/static/0e4fe6d90009bcd47c37629bd3129650/efc66/create_role.png 885w,
/static/0e4fe6d90009bcd47c37629bd3129650/c83ae/create_role.png 1180w,
/static/0e4fe6d90009bcd47c37629bd3129650/85053/create_role.png 1225w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Good job! Your role is now ready to be used. I think it’s time for coding!</p>
<p>You can now navigate to the Lambda Service trough: <code class="language-text">Services &gt; Compute &gt; Lambda</code>.</p>
<h3>Second step: Create our lambda functions</h3>
<p>We will start to create a first Lambda Function which will basically read out the content of our DynamoDB blog table.</p>
<p>So hit the <code class="language-text">Create Function</code> button and keep the selected creation option (Author from scratch). Choose a name for your Lambda Function, in this case I will name it <code class="language-text">GetArticles</code> and go for the <code class="language-text">Python 3.8</code> language runtime.</p>
<p>Before creating our function, one last important step is to select our IAM Role previously created. Open the Permissions just below, click on <code class="language-text">Use an existing role</code> and select your service role from the selected list like below:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/0cef0d74d8b2190f77db61124d3f33f4/fbfd6/lambda_role.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 54.72972972972974%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAABJElEQVQoz51Si26DMAzM//8n0NEGCHkHws02jDJp09pZOhkF63y2T2k9oG07gfcey7KglPJvKDPP+Oh7OCJLKSPlLHmtFdu2oRK2N6Cc83hoDR8CISIQ+DvEiGVdUYl4fQH1EKBmUtjrESElRAITZZLOBe+o43oOIrTo+zuR0ZikSHCQ1aPzX+D6QrsXQh55nCYY65FzIew7ZLWyU1Ye0/me5H3/t7/t/zhkZB5xmoxc2DkHS/iS/9toT2xnPo9ijpEnYzBbK7DWUYOwK8hZ1mEC2WJ9Nrrma3M1uoDu1pMPW7AnWe0wjDRmxDU2vBaKFd0fWghkd5RZHZuUTX5FEdNf8uGGbz5kYzekrmlatN0NfHUujoeNzsP8BDqWNCNncA2v7RPjgV3WYqGDSwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Lambda use role"
        title="Lambda use role"
        src="/static/0cef0d74d8b2190f77db61124d3f33f4/fcda8/lambda_role.png"
        srcset="/static/0cef0d74d8b2190f77db61124d3f33f4/12f09/lambda_role.png 148w,
/static/0cef0d74d8b2190f77db61124d3f33f4/e4a3f/lambda_role.png 295w,
/static/0cef0d74d8b2190f77db61124d3f33f4/fcda8/lambda_role.png 590w,
/static/0cef0d74d8b2190f77db61124d3f33f4/efc66/lambda_role.png 885w,
/static/0cef0d74d8b2190f77db61124d3f33f4/c83ae/lambda_role.png 1180w,
/static/0cef0d74d8b2190f77db61124d3f33f4/fbfd6/lambda_role.png 1357w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Hit the create function button, and you will be redirected your Lambda.</p>
<p>Ok so, in this Lambda, we just want to retrieve all our Articles from the DynamoDB table. For that, we can use the <code class="language-text">scan</code> operation that will just basically reads every items in our table. (More information <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Scan.html">here</a> about Scan.)</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token comment"># Boto is the Amazon Web Services (AWS) SDK for Python</span>
<span class="token keyword">import</span> boto3

<span class="token comment"># To interact with DynamoDB, I just need to specity what resource I will use from boto3 (here: dynamodb)</span>
dynamodb <span class="token operator">=</span> boto3<span class="token punctuation">.</span>resource<span class="token punctuation">(</span><span class="token string">'dynamodb'</span><span class="token punctuation">)</span>

<span class="token comment"># Now I specify which table in DynamoDB I want to interact with.</span>
table <span class="token operator">=</span> dynamodb<span class="token punctuation">.</span>Table<span class="token punctuation">(</span><span class="token string">'blog'</span><span class="token punctuation">)</span>
    
<span class="token keyword">def</span> <span class="token function">lambda_handler</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token comment"># Here, I will use a scan operation, to retrieve ALL my table items.</span>
        response <span class="token operator">=</span> table<span class="token punctuation">.</span>scan<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token comment"># Finally, I just return all the Items I found.</span>
        <span class="token keyword">return</span> response<span class="token punctuation">[</span><span class="token string">'Items'</span><span class="token punctuation">]</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token comment"># If an exception was thrown, I just catch it to print a log, and then I raise the error.</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'An error occured while retrieving Movies table.'</span><span class="token punctuation">)</span>
        <span class="token keyword">raise</span> e</code></pre></div>
<p>No more explanations needed for this code, its quite simple we just import the boto3 library to use the dynamodb client. We surround our scan operation with the try/catch operator and finally we return the Items.</p>
<p>You can now this Lambda code by clicking <code class="language-text">Save</code> at the top of the page, and now it’s time for testing :)</p>
<p>Just near the Save button, you have the possibility to create a <code class="language-text">Test Event</code> to trigger our function.</p>
<blockquote>
<p>FYI: Every AWS Lambda function contains at least 2 parameters :</p>
</blockquote>
<blockquote>
<p><strong>event</strong> – AWS Lambda uses this parameter to pass in event data to the handler.</p>
</blockquote>
<blockquote>
<p><strong>context</strong> – AWS Lambda uses this parameter to provide runtime information to your handler.</p>
</blockquote>
<p>Click on the <code class="language-text">Test</code> button, choose an event name (For example: TestGetItems) and leave the rest as is.</p>
<p>Your <code class="language-text">TestGetItems</code> is now part of your tests events. Ready to test your lambda ? Push the test button again ;)</p>
<p>Normally you should see a success box like this :</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/7490e24607018932f2231dbd1ee9b52b/bf8c1/getarticles_lambda_test.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 43.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABJ0AAASdAHeZh94AAABO0lEQVQoz5VRCW6DMBDk/09sEzUXAXxfGAMh07VRjjZtpSKNht2dvbzV28c7NrstmGSQVhIUjDcwgeB1Ye00uOLgmq9MEFqAKQYbVq0wApr0VWtr7JsdanHEkR1wkmeoIKD6DGpALANfbfLrKGEGVWAzk33zZX2lvIBxBj56+D7DUVdLPg039LDkc2S7sPpj6jFdRoxzeoDsRKyDQhVGB+8DuKAJlC7/MUbM84z/fNflCkVPVvnkqMAAax0CFRvHCcuy/JL1d9EweFo5yLJeHHsMUyyrR+I0Dy8YL+mOl/hEQ/V0lM402B43OIsTWnVGpxsw0z4evbBGzU8FOZ610nPYpJ8OpAsqZls0ol4v2FMwIyq4ZL4gF2Omo0OZosnJ3zWlYEfT5I654E+CW+KZmh7aPW3R3BveYs/8CSoYs6TCThwJAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Lambda GetArticles Success"
        title="Lambda GetArticles Success"
        src="/static/7490e24607018932f2231dbd1ee9b52b/fcda8/getarticles_lambda_test.png"
        srcset="/static/7490e24607018932f2231dbd1ee9b52b/12f09/getarticles_lambda_test.png 148w,
/static/7490e24607018932f2231dbd1ee9b52b/e4a3f/getarticles_lambda_test.png 295w,
/static/7490e24607018932f2231dbd1ee9b52b/fcda8/getarticles_lambda_test.png 590w,
/static/7490e24607018932f2231dbd1ee9b52b/efc66/getarticles_lambda_test.png 885w,
/static/7490e24607018932f2231dbd1ee9b52b/c83ae/getarticles_lambda_test.png 1180w,
/static/7490e24607018932f2231dbd1ee9b52b/bf8c1/getarticles_lambda_test.png 1722w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Well, I think we can claim our first beer, we successfully created our first lambda which read in our DynamoDB, congrats!</p>
<h3>Third step: Create the other lambda functions</h3>
<p>The goal of this article is to show you the basic operation we can do thanks to the interaction between Lambda and DynamoDB. Remember, the goal is to call these Lambda functions with an API.</p>
<p>So this is what is remaning for our Lambda :</p>
<ul>
<li>Retrieve all blog articles (GetArticles - done)</li>
<li>Find an article by title and category (FindByTitleAndCategory - TBD)</li>
<li>Update an article (UpdateArticle - TBD)</li>
<li>Delete an article (DeleteArticle - TBD)</li>
</ul>
<p>Let’s do this! Go back to the main Lambda screen, by clicking <code class="language-text">Services &gt; Compute &gt; Lambda</code>. Do the same job you did for the GetArticles Lambda, by clicking <code class="language-text">Create Function</code>.</p>
<p>This time, we will tackle our second lambda in the list, the <code class="language-text">FindByTitleAndCategory</code>. Your lambda settings should look likes this :</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/20859cd36e1fe92e375b56f725693773/b5a09/findbytitlecategory_settings.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 54.72972972972974%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAABLklEQVQoz51Si46DIBD0/3+ztbVVBOQhIDi3i3o1uVzuWpIJS4DZ2dlthmHA5XJF295grUPOGSmlj9EwiRAjrHOIMSLsKKWA17qub6Ex1uLx7NGTUo79PMN5D+9nLEuuxPkf4HeVcJom9EJiDqSMwISRpPOD8oayo6KqcBgEEQXyr1QP805W9sx/gd+nZdkI2UMpFbRhD9PmIymdQ6h7jSkZ3x3ncNzFLeY/h9/NTCUqreGoKZbUsmJW+VtDXsrWVxXnpkg9ob3da1OkUpWcwcSHWlaiPY1FPnUeG8Gxvgm1C+gePbqugxhHKKUxjrKW/MlqjDEYhahqeDB5rzGZnNLyY3DjaWdf8z4ujIWsarSxuN6fuHZ9hVAGjprAs8gq454knHA+MwlPBydxzuMLcINdyABKcl4AAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Lambda FindBy Settings"
        title="Lambda FindBy Settings"
        src="/static/20859cd36e1fe92e375b56f725693773/fcda8/findbytitlecategory_settings.png"
        srcset="/static/20859cd36e1fe92e375b56f725693773/12f09/findbytitlecategory_settings.png 148w,
/static/20859cd36e1fe92e375b56f725693773/e4a3f/findbytitlecategory_settings.png 295w,
/static/20859cd36e1fe92e375b56f725693773/fcda8/findbytitlecategory_settings.png 590w,
/static/20859cd36e1fe92e375b56f725693773/efc66/findbytitlecategory_settings.png 885w,
/static/20859cd36e1fe92e375b56f725693773/c83ae/findbytitlecategory_settings.png 1180w,
/static/20859cd36e1fe92e375b56f725693773/b5a09/findbytitlecategory_settings.png 1360w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<blockquote>
<p>Do not forget to attach the MyDynamoDBRoleForLambdas role.</p>
</blockquote>
<p>Let’s create this function, and copy paste this Python Code :</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> boto3
<span class="token comment"># This new import will be use to specify which DynamoDB Key we use in the KeyConditionExpression.</span>
<span class="token keyword">from</span> boto3<span class="token punctuation">.</span>dynamodb<span class="token punctuation">.</span>conditions <span class="token keyword">import</span> Key
 
client <span class="token operator">=</span> boto3<span class="token punctuation">.</span>resource<span class="token punctuation">(</span><span class="token string">'dynamodb'</span><span class="token punctuation">)</span>
table <span class="token operator">=</span> client<span class="token punctuation">.</span>Table<span class="token punctuation">(</span><span class="token string">'blog'</span><span class="token punctuation">)</span>
    
<span class="token keyword">def</span> <span class="token function">lambda_handler</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token comment"># I'll explain you later why we take these values from the event "pathParameters" property.</span>
        title <span class="token operator">=</span> event<span class="token punctuation">[</span><span class="token string">'pathParameters'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span>
        category <span class="token operator">=</span> event<span class="token punctuation">[</span><span class="token string">'pathParameters'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'category'</span><span class="token punctuation">]</span>
        
        <span class="token comment"># This time, we will use the query operation.</span>
        response <span class="token operator">=</span> table<span class="token punctuation">.</span>query<span class="token punctuation">(</span>
            ProjectionExpression<span class="token operator">=</span><span class="token string">"title, category, author, content, createdAt"</span><span class="token punctuation">,</span>
            KeyConditionExpression<span class="token operator">=</span>Key<span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>eq<span class="token punctuation">(</span>title<span class="token punctuation">)</span> <span class="token operator">&amp;</span> Key<span class="token punctuation">(</span><span class="token string">'category'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>eq<span class="token punctuation">(</span>category<span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
       
        <span class="token keyword">return</span> response<span class="token punctuation">[</span><span class="token string">'Items'</span><span class="token punctuation">]</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'An error occurred while retrieving an item in blog table.'</span><span class="token punctuation">)</span>
        <span class="token keyword">raise</span> e</code></pre></div>
<p>In this lambda we just need to specify which fields we want to see in our response thanks to the <code class="language-text">ProjectionExpression</code>.</p>
<p>The second one (the more important) is the <code class="language-text">KeyConditionExpression</code> which will determinate our conditional query expression (which article we want to query).</p>
<blockquote>
<p>You can find <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Query.html">here</a> the official documentation of a Query operation.</p>
</blockquote>
<p>Save your function, and add a new test event. This time our test event, will be a little bit different, because we will update the JSON provided to our handler :</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/228597a51ece3eaf826ea0a6e71373b8/8f0f9/findby_test.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 47.2972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABJ0AAASdAHeZh94AAABE0lEQVQoz52Q62rDMAyF8/7PtbEWxmCjLazQDtLRuslysx0ntpOcWUpnuv1qZ/g4tpB0JCdFUWK//0CaHpAePiHEGX3fz1gLe8Xf93Ws6zrUTYOELlJKKK2hmZYTnHOXxjYacIMfs8jvWNJIjePxxJORZlnGdyEEqqpmA6kUVKBt26CzMb0pruMgGt57JOemRVE1qOsatD4VTdOEYRhw7/GhhleeHTVccBjHMSZQ41uJDY0xyPMvlGXFzYjhTqjGWscktCKtajoTnMZ/gYvyH5qwchYmPIkCZa3R2fEmejuxmn6IdNbThArbncDjW4uHV4XFymC5NqyLjcRTgHXdYLkxnMe6qoJqvGx9wOH53SOvHL4BsMS4dxZneDMAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="FindBy test event"
        title="FindBy test event"
        src="/static/228597a51ece3eaf826ea0a6e71373b8/fcda8/findby_test.png"
        srcset="/static/228597a51ece3eaf826ea0a6e71373b8/12f09/findby_test.png 148w,
/static/228597a51ece3eaf826ea0a6e71373b8/e4a3f/findby_test.png 295w,
/static/228597a51ece3eaf826ea0a6e71373b8/fcda8/findby_test.png 590w,
/static/228597a51ece3eaf826ea0a6e71373b8/efc66/findby_test.png 885w,
/static/228597a51ece3eaf826ea0a6e71373b8/8f0f9/findby_test.png 1045w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Once is created, just hit the Test button and let’s see what we received :)</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/1667a05bf6e5695273471845d00f3095/bf8c1/findby_result.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 37.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABJ0AAASdAHeZh94AAABF0lEQVQoz5WR607DMAyF+/5vOEADbZStzcVx0qTpLj046VZg/IFIn3zsozhW3GxeNig8bZ+hSMMNbiEUqGplVfV620PXqKCdQac7kCdYthWSO83rxxYH26LVe+zUO1ToYQYlaJiob3rBSu5GI9gKZ7vkydSo5W5TXmDp7AfGkAJC9FX7NIAL4nFgcKkJ+TwK+caXni4ZfpQJY0ywRka2hKLjEDFNJ8zzjP+eMDKaPGY4xyCSKX2oza7XK9Z+3/vOf2ioSSGdIvJlxHhOayy1R0r9zi9PcIlkKe0WrdrjYNoVKwvhTPXjvUTFHXbHNxztR6VzB3BZyg8IJMtpWtlsSVyyKyX32dUYJkZPR+y73eLJFHf/keJ/AtDAZ0XLHAU/AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="FindBy test event"
        title="FindBy test event"
        src="/static/1667a05bf6e5695273471845d00f3095/fcda8/findby_result.png"
        srcset="/static/1667a05bf6e5695273471845d00f3095/12f09/findby_result.png 148w,
/static/1667a05bf6e5695273471845d00f3095/e4a3f/findby_result.png 295w,
/static/1667a05bf6e5695273471845d00f3095/fcda8/findby_result.png 590w,
/static/1667a05bf6e5695273471845d00f3095/efc66/findby_result.png 885w,
/static/1667a05bf6e5695273471845d00f3095/c83ae/findby_result.png 1180w,
/static/1667a05bf6e5695273471845d00f3095/bf8c1/findby_result.png 1722w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>This time, we just received 1 item based from the value passed in the test event. Our FindBy Lambda is now operational!</p>
<p>Let’s move on, and tackle the <code class="language-text">CreateArticle</code> one, create a new Lambda function again (Author From Scratch, Python 3.8 Runetime, and our DynamoDB role) and provide this following code :</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> json
<span class="token keyword">import</span> boto3
<span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime
<span class="token keyword">from</span> botocore<span class="token punctuation">.</span>exceptions <span class="token keyword">import</span> ClientError
        
dynamodb_client <span class="token operator">=</span> boto3<span class="token punctuation">.</span>resource<span class="token punctuation">(</span><span class="token string">'dynamodb'</span><span class="token punctuation">)</span>
table <span class="token operator">=</span> dynamodb_client<span class="token punctuation">.</span>Table<span class="token punctuation">(</span><span class="token string">'blog'</span><span class="token punctuation">)</span>

lambda_client <span class="token operator">=</span> boto3<span class="token punctuation">.</span>client<span class="token punctuation">(</span><span class="token string">'lambda'</span><span class="token punctuation">)</span>
    
<span class="token keyword">def</span> <span class="token function">lambda_handler</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token comment"># here, we want to handle both cases: if we receive a body as string, or a body as object.</span>
        <span class="token keyword">if</span> <span class="token builtin">type</span><span class="token punctuation">(</span>event<span class="token punctuation">[</span><span class="token string">'body'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">str</span><span class="token punctuation">:</span>
            body <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>event<span class="token punctuation">[</span><span class="token string">'body'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            body <span class="token operator">=</span> event<span class="token punctuation">[</span><span class="token string">'body'</span><span class="token punctuation">]</span>
        
        <span class="token comment"># we extract this 2 properties to retrive the item inserted after.</span>
        title <span class="token operator">=</span> body<span class="token punctuation">[</span><span class="token string">'author'</span><span class="token punctuation">]</span>
        category <span class="token operator">=</span> body<span class="token punctuation">[</span><span class="token string">'category'</span><span class="token punctuation">]</span>
        
        createdAt <span class="token operator">=</span> datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">'%Y-%m-%dT%H:%M:%SZ'</span><span class="token punctuation">)</span>
        
        response <span class="token operator">=</span> table<span class="token punctuation">.</span>put_item<span class="token punctuation">(</span>
            Item<span class="token operator">=</span><span class="token punctuation">{</span>
                <span class="token string">'title'</span><span class="token punctuation">:</span> title<span class="token punctuation">,</span>
                <span class="token string">'category'</span><span class="token punctuation">:</span> category<span class="token punctuation">,</span>
                <span class="token string">'author'</span><span class="token punctuation">:</span> body<span class="token punctuation">[</span><span class="token string">'author'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">'content'</span><span class="token punctuation">:</span> body<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">'createdAt'</span><span class="token punctuation">:</span> createdAt
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
        
        <span class="token comment"># According to the documentation, We can set a ReturnValues='ALL_NEW' property in our PutItem operation.</span>
        <span class="token comment"># But the the ALL_NEW isn't accepted for put_item.</span>
        
        <span class="token comment"># The other solution is to re-query our database to get the item created.</span>
        
        <span class="token comment"># But, re-query the DB is just re-triggering the same Job we did</span>
        <span class="token comment"># in our FindByTitleCategory lambda.</span>
        
        <span class="token comment"># We have the possibility to invoke another Lambda in our Lambda</span>
        invoke_response <span class="token operator">=</span> lambda_client<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span>
            FunctionName<span class="token operator">=</span><span class="token string">"FindByTitleCategory"</span><span class="token punctuation">,</span>
            InvocationType<span class="token operator">=</span><span class="token string">'RequestResponse'</span><span class="token punctuation">,</span>
            Payload<span class="token operator">=</span>json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"pathParameters"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"title"</span><span class="token punctuation">:</span> title<span class="token punctuation">,</span> <span class="token string">"category"</span><span class="token punctuation">:</span> category<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
        
        <span class="token comment"># Finally, we need to convert our response in an object and return the</span>
        <span class="token comment"># payload received from our Lambda</span>
        item <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>invoke_response<span class="token punctuation">[</span><span class="token string">'Payload'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> ClientError <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'An error occured while trying to insert a new movie'</span><span class="token punctuation">)</span>
        <span class="token keyword">raise</span> e
        
    <span class="token keyword">return</span> item</code></pre></div>
<blockquote>
<p>Do you remember in our Policy we added an Effect Allow on the InvokeFunction api call :)</p>
</blockquote>
<p>Before configuring our test event, just some clarifications about this portion of code: </p>
<ul>
<li>First, to retrieve the body sent by the POST action, e want to handle both scenarios use cases (object and stringified object). That’s why we check the type of the <code class="language-text">event body</code>.</li>
<li>Then, we use the <code class="language-text">put_item</code> operation by simply passing the Item that we want to insert in database.</li>
<li>Finally, to retrieve the item created, we just use the Lambda Function we created to retrieve an article by his title and his category. But you can also directly query the database like we did in the Lambda, it’s also possible</li>
</ul>
<p>Ok so let’s create our test event :
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/12e4b13574727a42d9caeaecd02288ee/fd84e/create_articletest.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 54.72972972972974%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAABOklEQVQoz52S226DMBBE+f8/rNSHBJIABny3uWe6u23S9KVNaunIK2MNM+stQowoywrHssSlrnE6nTGOI5Z1wbI8zzTPCCGgyDnDOQdrLe1e6hiTiPI3huvE+zT9OM9c3/j6XqQ84tIoNE2Dmmhbha7r0CoFY6wIpZSEuxCfPZynlIVlXVEEEqxNEGfGOjjvwet6veLVtW3bZ2T+CwvN1AsW+g/fgpTfkru+H7CS5X3fsRH7i3Bc6WGmyFob6Re/1v4PsUdRcchiXd9TbEfutvsFjsCsDF3+Db7HhkRQ0YsOxkMNNDY+wAYnhBSFiaIs84KZZu0v5FFYcCLh41njcO5xaI94O71DGRofrdDbASZYaK/hIk2DN1LzzgxOw0d/c5hRVRUubY/ORCKgoZ42gyGXWTA+PUUaJ3wAoh5Wgwe9XX8AAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="FindBy test event"
        title="FindBy test event"
        src="/static/12e4b13574727a42d9caeaecd02288ee/fcda8/create_articletest.png"
        srcset="/static/12e4b13574727a42d9caeaecd02288ee/12f09/create_articletest.png 148w,
/static/12e4b13574727a42d9caeaecd02288ee/e4a3f/create_articletest.png 295w,
/static/12e4b13574727a42d9caeaecd02288ee/fcda8/create_articletest.png 590w,
/static/12e4b13574727a42d9caeaecd02288ee/efc66/create_articletest.png 885w,
/static/12e4b13574727a42d9caeaecd02288ee/fd84e/create_articletest.png 1056w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Before testing our Lambda Function, this one is a little bit more “bigger” than the other one, so it’s possible to have some timeout when its triggered.</p>
<p>I suggest for this example to augment a little bit the “default” lambda settings by increasing a little bit the default timeout timer, up 3 to 10 seconds. </p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/29749a014314a0e79755c72ee3b176b4/d0143/lambda_timeout.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 64.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABJ0AAASdAHeZh94AAABg0lEQVQ4y5VT2XKDMAzk/7+uP9D0oYGcYDD4xGYriaM0yUxbzezYBnu1ltZFXdcoyxKHwwdu9zvGcUQI4d+IBOscin4YoNoWSilo3QthSgnjA9IvyDkLceG8R9/3cMQ+EDkfnqYJecG0gA884jFYTGGtJcIBLamzYVFHP2Z8z5lg2ichgmmXkCMyIatrmkaurFoNY4wo5dES1vUYI3Ji4iS3YSHYkW4K1wM+pm0DOP8u+4y8qYxxFLwk5GzGEqnNGMwbyX6H9wvprzE9E7K6O1lHqRYhOsrsJbvUb6nnqkhAa661DWkj+kF47QyO5xuqqsLnsaJ6tlQCUkyl4GZ5ckEIEZ4s4RfP9S4SRmnQE6HzQWyjtZZaMpiIx67TsumvIYSayI5lRa+kBnvS+1mJc15gpcaWum3ntXUC/jZ3e57zPj5X8OR8ueJ0vuByvaFmC9HLefVSZKROy/UpMb+sQHZaQ3xoXMCtI9LWoGoGwUkZ1L2nzG5WRsr3ps7Ly1kNv7/yF6lB+R/wyIZnAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Increase Lambda Timeout"
        title="Increase Lambda Timeout"
        src="/static/29749a014314a0e79755c72ee3b176b4/fcda8/lambda_timeout.png"
        srcset="/static/29749a014314a0e79755c72ee3b176b4/12f09/lambda_timeout.png 148w,
/static/29749a014314a0e79755c72ee3b176b4/e4a3f/lambda_timeout.png 295w,
/static/29749a014314a0e79755c72ee3b176b4/fcda8/lambda_timeout.png 590w,
/static/29749a014314a0e79755c72ee3b176b4/efc66/lambda_timeout.png 885w,
/static/29749a014314a0e79755c72ee3b176b4/d0143/lambda_timeout.png 1025w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<blockquote>
<p>I provide you a great article for <a href="https://medium.com/@raupach/choosing-the-right-amount-of-memory-for-your-aws-lambda-function-99615ddf75dd">choosing the right amount of memory for an AWS lambda</a></p>
</blockquote>
<p>I think we can test our Create Lambda function, hit the Test button and you should have this output :</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/9b04afd01908050b0149d2b90cff9306/0f903/create_result.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 42.567567567567565%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABJ0AAASdAHeZh94AAABQ0lEQVQoz4WRi26DMAxF+f8v3KSuaykwIO8Xz9I7J5CukyYN6eg69rUT4eLt9I5rXUIaAW4ktNPQ/sApGFKmWKKXPbjiSYUW6HgHRR5pZeqPcfHZnFHzCmV3waWvwCw1eUbwHZfPDIJQAzWOMqk+NCMcQ9EqQUM0NRpIbylpwOPZOzDv99oLdhpg55EYDvbYkYpBo/A+QEkFpTQCxeM4YV1WYjlYsZBu24b/PjEYFC6MkDRMKgNjPcZpxn17YL1vv4i5+yOCxPYHPNDARjKYOcAt8fkhEc9mOjTFPpHr9iX3Q4AItJRzdULdl2hlk2Cmo/9E2x0jMsWccmV7QafII2rSL1iqZ6I3+vQgUXyJJgWZvajpRmKkJcxxST1qVh2X7I1PT/aRpoFle6VX9SmReQ4ldTQw1j9uJ9zI26n2WXv15YHfTCix13ScNfUAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Create Article success"
        title="Create Article success"
        src="/static/9b04afd01908050b0149d2b90cff9306/fcda8/create_result.png"
        srcset="/static/9b04afd01908050b0149d2b90cff9306/12f09/create_result.png 148w,
/static/9b04afd01908050b0149d2b90cff9306/e4a3f/create_result.png 295w,
/static/9b04afd01908050b0149d2b90cff9306/fcda8/create_result.png 590w,
/static/9b04afd01908050b0149d2b90cff9306/efc66/create_result.png 885w,
/static/9b04afd01908050b0149d2b90cff9306/c83ae/create_result.png 1180w,
/static/9b04afd01908050b0149d2b90cff9306/0f903/create_result.png 1719w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Ok we did the most difficult Lambda creation, the other ones will be more easier :)</p>
<p>Let’s tackle the <code class="language-text">UpdateArticle</code> one by creating a new Lambda and provide this code :</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> json
<span class="token keyword">import</span> boto3
<span class="token keyword">from</span> botocore<span class="token punctuation">.</span>exceptions <span class="token keyword">import</span> ClientError
<span class="token keyword">from</span> boto3<span class="token punctuation">.</span>dynamodb<span class="token punctuation">.</span>conditions <span class="token keyword">import</span> Key
        
dynamodb_client <span class="token operator">=</span> boto3<span class="token punctuation">.</span>resource<span class="token punctuation">(</span><span class="token string">'dynamodb'</span><span class="token punctuation">)</span>
table <span class="token operator">=</span> dynamodb_client<span class="token punctuation">.</span>Table<span class="token punctuation">(</span><span class="token string">'blog'</span><span class="token punctuation">)</span>
    
<span class="token keyword">def</span> <span class="token function">lambda_handler</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">type</span><span class="token punctuation">(</span>event<span class="token punctuation">[</span><span class="token string">'body'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">str</span><span class="token punctuation">:</span>
            body <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>event<span class="token punctuation">[</span><span class="token string">'body'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            body <span class="token operator">=</span> event<span class="token punctuation">[</span><span class="token string">'body'</span><span class="token punctuation">]</span>
        
        <span class="token comment"># here we retrieve the same parameters as the FindBy lambda</span>
        <span class="token comment"># to identify what item to update.</span>
        title <span class="token operator">=</span> event<span class="token punctuation">[</span><span class="token string">'pathParameters'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span>
        category <span class="token operator">=</span> event<span class="token punctuation">[</span><span class="token string">'pathParameters'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'category'</span><span class="token punctuation">]</span>
        
        <span class="token comment"># we will use the update_item in this case</span>
        response <span class="token operator">=</span> table<span class="token punctuation">.</span>update_item<span class="token punctuation">(</span>
            Key<span class="token operator">=</span><span class="token punctuation">{</span>
                <span class="token string">'title'</span><span class="token punctuation">:</span> title<span class="token punctuation">,</span>
                <span class="token string">'category'</span><span class="token punctuation">:</span> category
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            UpdateExpression<span class="token operator">=</span><span class="token string">"set content = :content, author = :author"</span><span class="token punctuation">,</span>
            ConditionExpression<span class="token operator">=</span><span class="token string">"title = :title AND category = :category"</span><span class="token punctuation">,</span>
            ExpressionAttributeValues<span class="token operator">=</span><span class="token punctuation">{</span>
                <span class="token string">':title'</span><span class="token punctuation">:</span> title<span class="token punctuation">,</span>
                <span class="token string">':category'</span><span class="token punctuation">:</span> category<span class="token punctuation">,</span>
                <span class="token string">':content'</span><span class="token punctuation">:</span> body<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string">':author'</span><span class="token punctuation">:</span> body<span class="token punctuation">[</span><span class="token string">'author'</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            ReturnValues<span class="token operator">=</span><span class="token string">"ALL_NEW"</span>
        <span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> response<span class="token punctuation">[</span><span class="token string">'Attributes'</span><span class="token punctuation">]</span>
    <span class="token keyword">except</span> ClientError <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">if</span> e<span class="token punctuation">.</span>response<span class="token punctuation">[</span><span class="token string">'Error'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'Code'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"ConditionalCheckFailedException"</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>response<span class="token punctuation">[</span><span class="token string">'Error'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'Message'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> e</code></pre></div>
<p>For this portion of code, we will need the primary key identifier to determinate which object we want to update.</p>
<p>Remember, when we created our DynamoDB table, we specified a <strong>partition key</strong> (title), and a <strong>sort key</strong> (category) which represent our <strong>primary key</strong>.</p>
<p>It means that if we want to make some actions in a particular item in our table, we have to specify these two properties.</p>
<p>Another good news is, we can specify also the <code class="language-text">ReturnValues=&quot;ALL_NEW&quot;</code> that will return the complete object updated.</p>
<p>In this lambda, I decided to update my item with Conditional Expressions. It means that it will update my item only if its respect the <strong>ConditionsExpressions</strong>. If not, it will raise a <strong>ConditionalCheckFailedException</strong>.</p>
<blockquote>
<p>You can have a look on what are <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.ConditionExpressions.html">conditions expressions</a>.</p>
</blockquote>
<p>Let’s configure our test event and test it just after :
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/b168a192c163c9343552cfe23f341811/ee9b6/update_test.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 32.43243243243243%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABJ0AAASdAHeZh94AAAA5klEQVQY052R207GIBCE+/5PqBcabUuBQms5/BwKdARqoolXSvJlJrOw2SyDsRZ8FRBCIuWMUgryP2hv43liiDHCaI0QAtq5avHPXBdSbXa2hlJbPE8LxjalecCmAlOxuXT/i/yjlu+7JmXopjFh2I3FK10xSg2yG3DtO0w5MP0AN01v3+m5754qW4fwkDaAVVUuYFDHAbpQTPTA0wvHTDdMjIGsEkRwvDGCkS+Y15ZxEL5hZrJn72wBFQLboWCsq2uLGLQ29UNE3+H+YdE+adM7XHA988F3Qrx9rBrid+a8+8pj3+EnyC7PfFZN+1cAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Update Article Test Event"
        title="Update Article Test Event"
        src="/static/b168a192c163c9343552cfe23f341811/fcda8/update_test.png"
        srcset="/static/b168a192c163c9343552cfe23f341811/12f09/update_test.png 148w,
/static/b168a192c163c9343552cfe23f341811/e4a3f/update_test.png 295w,
/static/b168a192c163c9343552cfe23f341811/fcda8/update_test.png 590w,
/static/b168a192c163c9343552cfe23f341811/efc66/update_test.png 885w,
/static/b168a192c163c9343552cfe23f341811/ee9b6/update_test.png 1041w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>As you can see, this is what we received :
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/3cb38152c91c940a7100947b68c06cda/4ed6a/update_success.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 39.189189189189186%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABJ0AAASdAHeZh94AAABI0lEQVQoz4WR6XKDMAyEef837Jkh4fR9YMLZrWwgpO2PMvPN2pJsrUX28vGKvMwhrSQUTGc2vE6qSZli4Jo/NLGvLdUII1Kd7Syya5ujURUKfkMha6ggNnpJKs89oSlm7iphdz1iMc8dQ8Ykh1AcylCRJ2duw4aOXDpaU2dv4ah7GAKmZcQ4Dye0j7F+CpCeI7PGQUq6jNS7DtM4YV3WxDIvmAl84d8vXiqiQxccwr1L9CM5WLeO47J1j3rEEuue++UyjB1EdPh+fUNNM2SmQavrNM84D3vX+6w0almiFAUayle0jk+zw5k/SE+uZQVNw38mJt1gEp6oREkN2xTXQf3IPyO9oL/c5OCWwfTqQTx0XB73BbvhUn4mp/HQViP/wGyLbw6/ZIg4FngiAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Update Article Test Event"
        title="Update Article Test Event"
        src="/static/3cb38152c91c940a7100947b68c06cda/fcda8/update_success.png"
        srcset="/static/3cb38152c91c940a7100947b68c06cda/12f09/update_success.png 148w,
/static/3cb38152c91c940a7100947b68c06cda/e4a3f/update_success.png 295w,
/static/3cb38152c91c940a7100947b68c06cda/fcda8/update_success.png 590w,
/static/3cb38152c91c940a7100947b68c06cda/efc66/update_success.png 885w,
/static/3cb38152c91c940a7100947b68c06cda/c83ae/update_success.png 1180w,
/static/3cb38152c91c940a7100947b68c06cda/4ed6a/update_success.png 1713w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>And if we check our DynamoDB blog table :
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/79233c457756de4feb53269d72c47be7/e8d6f/blog_table_updated.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 49.32432432432432%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABJ0AAASdAHeZh94AAACCElEQVQoz22STWsaURSG50cpbtypKKILf0FWbswiXWixcdFsXLnwB3SVJqSBNKHS0qS0xNSvFKQ6saG0Lhqhgo6ZGZ1xvvx8e+6VKWnJhYfznnfmnjt3zhFMfQxzqmNuaXBsE5Zl/cU0TQ7ThmH8k7u63++j2+3irtfDYDCE8OXHEB++9vDr9xD30gCyLGM8HkNVVa4VReH5aDTi2n0uy/dUYMA19xUVumFBeNsaYb/ax82dDIk2GZaN9XqN5XKJ1WrF40Ptxv+XrutUXIVwcX6O8tUVTs5KePP+I95dfEL58hK1Wg3VapXHh5rFRqOBUqmEQqGAYrGIfD7PYbmQTCaxs/METzMZ5HafYXs7hVQqhQzlj5FOp5HNZrG1tQWPxwOv1wufz8ej3++HEI/HEQgEkMvt4vneHiKRCEKhEILBIPeZZtHVrh8Oh8H2xmIxTjQaRSKRgNDpdFD+XEGrLeL29hs6nRtc05Xq9Tra7RYqlQpEsc1h1202m9wXRZFHl1Zr4wmsAZq1hG6vsVpvfrDjzOHM5lxrmobZbNME07Q5tr2gxuHRJTiOA0nTiTGsmUSWhOlUJhTqpoHJhHxLwmLBRmlEsNH6SXwnT6HCBnVeIibEEsJ8bmNivoZqHMB0TqngGRXYJw6p4CF90Qvyjkm/otE4IF7SIccUT2nYj+jgI9InBHtHxh9p8ZnxlDByrQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Blog Table Updated"
        title="Blog Table Updated"
        src="/static/79233c457756de4feb53269d72c47be7/fcda8/blog_table_updated.png"
        srcset="/static/79233c457756de4feb53269d72c47be7/12f09/blog_table_updated.png 148w,
/static/79233c457756de4feb53269d72c47be7/e4a3f/blog_table_updated.png 295w,
/static/79233c457756de4feb53269d72c47be7/fcda8/blog_table_updated.png 590w,
/static/79233c457756de4feb53269d72c47be7/efc66/blog_table_updated.png 885w,
/static/79233c457756de4feb53269d72c47be7/c83ae/blog_table_updated.png 1180w,
/static/79233c457756de4feb53269d72c47be7/e8d6f/blog_table_updated.png 1273w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Finally, we will tackle the last one, create the DeleteArticle Lambda Function and provide this code :</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> json
<span class="token keyword">import</span> boto3
<span class="token keyword">from</span> botocore<span class="token punctuation">.</span>exceptions <span class="token keyword">import</span> ClientError
<span class="token keyword">from</span> boto3<span class="token punctuation">.</span>dynamodb<span class="token punctuation">.</span>conditions <span class="token keyword">import</span> Key
        
dynamodb_client <span class="token operator">=</span> boto3<span class="token punctuation">.</span>resource<span class="token punctuation">(</span><span class="token string">'dynamodb'</span><span class="token punctuation">)</span>
table <span class="token operator">=</span> dynamodb_client<span class="token punctuation">.</span>Table<span class="token punctuation">(</span><span class="token string">'blog'</span><span class="token punctuation">)</span>
    
<span class="token keyword">def</span> <span class="token function">lambda_handler</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        title <span class="token operator">=</span> event<span class="token punctuation">[</span><span class="token string">'pathParameters'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span>
        category <span class="token operator">=</span> event<span class="token punctuation">[</span><span class="token string">'pathParameters'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'category'</span><span class="token punctuation">]</span>
        
        response <span class="token operator">=</span> table<span class="token punctuation">.</span>delete_item<span class="token punctuation">(</span>
            Key<span class="token operator">=</span><span class="token punctuation">{</span>
                <span class="token string">'title'</span><span class="token punctuation">:</span> title<span class="token punctuation">,</span>
                <span class="token string">'category'</span><span class="token punctuation">:</span> category
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> response
    <span class="token keyword">except</span> ClientError <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>response<span class="token punctuation">[</span><span class="token string">'Error'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'Message'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">raise</span> e</code></pre></div>
<p>And the test event :
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/19a615e02b1e0a628d2efd72e6d0d007/ffe34/delete_event.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 24.324324324324326%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABJ0AAASdAHeZh94AAAAtklEQVQY052PSRLCIBBFvf8RXWk5BAwQhpBEAnw/URcuXOjiVXf18Lp6J6WEEAIpJdRaUUr5mZzztu+8x87HiDgvWEtFao0/uK+EQm0p3B9POJyvsJTGXBHWgjGT9Qvv3ms2ULbFlHEzFJ4o66SGMAF9mKHChN6TMH6gNp69lku+N8QZbr7DTgvGJaEfQhNeIHWAUB6SaBb7JjeOFy2HHKQZttjqba7lndIwboTlgcFFTBQr7j4AOsCC04A6x+IAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Delete Event"
        title="Delete Event"
        src="/static/19a615e02b1e0a628d2efd72e6d0d007/fcda8/delete_event.png"
        srcset="/static/19a615e02b1e0a628d2efd72e6d0d007/12f09/delete_event.png 148w,
/static/19a615e02b1e0a628d2efd72e6d0d007/e4a3f/delete_event.png 295w,
/static/19a615e02b1e0a628d2efd72e6d0d007/fcda8/delete_event.png 590w,
/static/19a615e02b1e0a628d2efd72e6d0d007/efc66/delete_event.png 885w,
/static/19a615e02b1e0a628d2efd72e6d0d007/ffe34/delete_event.png 1055w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Let’s try your Delete Lambda function and your item is now deleted from your table :
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/abe9712f8ebe7fc8a79ad38b604c297a/0d98f/table_after_delete.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 46.621621621621614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABJ0AAASdAHeZh94AAABxUlEQVQoz22SzYoaURCF+6VExI1/C0VduvMRXE1cmFHjC4grI0zeIK6ySEgwQ2IaxRZGR80QshFGRuJP29qtbXfbap/cukGZJF74qHOLugW36gjbtQp9s4FtaNhZBkzTYph/YVkWttst14ZhnKOu6xiNRhgOh3gaj7FYKBB+PMq4+znGr+kc8mwKRVlguVyyqLCCBY+r1Qqz2YxrWZbP98lkwmunLCorDRvdgPBWmuL17Qj3Q5kVzaEbJo7HI/b7PQ6HA+ekn8fnx3Ec3ljTNAi12md8qYt49/4jPtTq+HT7FaIoQpIktFqti7TbbVSrVZTLZVQqFRSLRZRKJdzcvIGQSqWQyWRwff0ShVd5vLi6QjqdRj6fv0gul0OhUEAikYDL5YLH44HX64Xb7UY0GoUQi8Xg9/uRzWZ5cSgUQjAY5DkiEAj8p30+H8LhMOLxOOg9EYlEkEwmIfT7fdS/ibjv9fHw8B10bzab7GsSOp0OGo0GBoMB03dcU67X63G63e4ZylOdcGQDVY095+D8GTLZ4jR4VVVh2zbXZBOCLEOLu3QEa7fDXDMhr5nfbGrisG2t+SNqRA13rIY4WYjsRBulpv/yGzacVSv8hAtcAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Table after delete"
        title="Table after delete"
        src="/static/abe9712f8ebe7fc8a79ad38b604c297a/fcda8/table_after_delete.png"
        srcset="/static/abe9712f8ebe7fc8a79ad38b604c297a/12f09/table_after_delete.png 148w,
/static/abe9712f8ebe7fc8a79ad38b604c297a/e4a3f/table_after_delete.png 295w,
/static/abe9712f8ebe7fc8a79ad38b604c297a/fcda8/table_after_delete.png 590w,
/static/abe9712f8ebe7fc8a79ad38b604c297a/efc66/table_after_delete.png 885w,
/static/abe9712f8ebe7fc8a79ad38b604c297a/c83ae/table_after_delete.png 1180w,
/static/abe9712f8ebe7fc8a79ad38b604c297a/0d98f/table_after_delete.png 1276w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h3>Let’s summarize</h3>
<ul>
<li>We created our IAM <strong>admin</strong> user</li>
<li>With the admin user, we created the <strong>policy</strong> that <strong>allows our Lambdas to interact wich our DynamoDB</strong>.</li>
<li>We <strong>attached this policy to our IAM Role</strong>.</li>
<li>
<p>We created <strong>5</strong> Lambda Functions :</p>
<ul>
<li><strong>GetArticles</strong> (which list all articles from blog table)</li>
<li><strong>FinByTitleAndCategory</strong> (which list an article based from his primary key)</li>
<li><strong>CreateArticle</strong> (which create an article item in blog table)</li>
<li><strong>UpdateArticle</strong> (which update an article based from his primary key)</li>
<li><strong>DeleteArticle</strong> (which delete an article based from his primary key)</li>
</ul>
</li>
</ul>
<p>Woah, we did a great job, congrats. Let’s move on now to the latest part, the <a href="../serverless-api-with-lambda-part-3">creation of our API Gateway</a>.</p></section><hr style="margin-bottom:1.75rem"/><footer><div style="display:flex;margin-bottom:4.375rem"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:50px;height:50px;margin-right:0.875rem;margin-bottom:0;min-width:50px;border-radius:100%"><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAUDBAH/xAAWAQEBAQAAAAAAAAAAAAAAAAABAwL/2gAMAwEAAhADEAAAAbOGfANpObn0Sg36KS//xAAdEAADAAEFAQAAAAAAAAAAAAABAgMABBESISMy/9oACAEBAAEFAuWISTuM1HwtWkVoCKdrL0E3Kr//xAAZEQACAwEAAAAAAAAAAAAAAAAAAQISITH/2gAIAQMBAT8BxIsifBn/xAAYEQEBAAMAAAAAAAAAAAAAAAAAAQISIf/aAAgBAgEBPwHta1gj/8QAHBAAAgICAwAAAAAAAAAAAAAAAAECEBEhMUFx/9oACAEBAAY/ArUU+SSfVebMSMaP/8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFBUWH/2gAIAQEAAT8hPhjjmz15n2i0Vrd2peFSxdYJbHPIDXpSG3flvuVKIFLSf//aAAwDAQACAAMAAAAQQz9B/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAExEP/aAAgBAwEBPxCp4yKP/8QAGBEBAAMBAAAAAAAAAAAAAAAAAQAQMRH/2gAIAQIBAT8QBeFOmYn/xAAcEAEBAAMBAQEBAAAAAAAAAAABEQAhUTFhQdH/2gAIAQEAAT8Q7hlW31Xz8mW3h0KjmEDZfus3KfQATz7lDCLwzzHcbVD0SYFVZwm9/uIzzBqx/XP/2Q==" alt="Julien Sauvannet" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms;border-radius:50%"/><noscript><picture><source srcset="/static/5cedcb2b70ec9d23884c6868cc27b7c4/99438/profile-pic.jpg 1x,
/static/5cedcb2b70ec9d23884c6868cc27b7c4/aba1d/profile-pic.jpg 1.5x,
/static/5cedcb2b70ec9d23884c6868cc27b7c4/b315d/profile-pic.jpg 2x" /><img loading="lazy" width="50" height="50" srcset="/static/5cedcb2b70ec9d23884c6868cc27b7c4/99438/profile-pic.jpg 1x,
/static/5cedcb2b70ec9d23884c6868cc27b7c4/aba1d/profile-pic.jpg 1.5x,
/static/5cedcb2b70ec9d23884c6868cc27b7c4/b315d/profile-pic.jpg 2x" src="/static/5cedcb2b70ec9d23884c6868cc27b7c4/99438/profile-pic.jpg" alt="Julien Sauvannet" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><p>Written by <strong>Julien Sauvannet</strong> <!-- -->a passionate full-stack developer.<!-- --> <br/>Senior Software Developer at <a href="https://www.arhs-group.com/entities/spikeseed/">ARHS Spikeseed</a>.</p></div></footer></article><nav><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/serverless-api-with-lambda-part-1/">← <!-- -->Create a Serverless API with AWS - Part 1</a></li><li><a rel="next" href="/serverless-api-with-lambda-part-3/">Create a Serverless API with AWS - Part 3<!-- --> →</a></li></ul></nav></main><footer>© <!-- -->2020<!-- -->, Built with<!-- --> <a href="https://www.gatsbyjs.org">Gatsby</a><br/><small>Socials links: <a href="https://twitter.com/jstw">Twitter</a>, <a href="https://stackoverflow.com/users/8597732/jstw">StackOverflow</a>, <a href="https://www.linkedin.com/in/julien-sauvannet-8b5330b7/">Linkedin</a>.</small></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/serverless-api-with-lambda-part-2/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-2133e6e763bae3842737.js"],"component---src-pages-404-js":["/component---src-pages-404-js-50205e4e99371a0751f6.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-c8754662282af222e758.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-9ca39ad9e1bc5fd245d7.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-9ca39ad9e1bc5fd245d7.js" async=""></script><script src="/fab8c9364b01cebfd3503fc18011994750f493ff-90634a6f70c4656f59bc.js" async=""></script><script src="/commons-81f99fe6b62df718b8c0.js" async=""></script><script src="/app-2133e6e763bae3842737.js" async=""></script><script src="/styles-ae6d046c35c187471a06.js" async=""></script><script src="/framework-81e6052b3504df28bf0b.js" async=""></script><script src="/webpack-runtime-f08a2b5eac2916abced9.js" async=""></script></body></html>