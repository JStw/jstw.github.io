{"componentChunkName":"component---src-templates-blog-post-js","path":"/serverless-api-with-lambda-part-1/","result":{"data":{"site":{"siteMetadata":{"title":"Jstw Blog"}},"markdownRemark":{"id":"d1d5b49e-e02e-5360-b896-947835dc2646","excerpt":"Hey there! This is my first post on my new blog ;-) In this article, we will have a look at how we can create a web application without handling any server…","html":"<p>Hey there! This is my first post on my new blog ;-)</p>\n<p>In this article, we will have a look at how we can create a web application without handling any server architecture/installation.</p>\n<p>This kind of architecture is called “serverless”. (more information <a href=\"https://hackernoon.com/what-is-serverless-architecture-what-are-its-pros-and-cons-cc4b804022e9\">here</a>).</p>\n<p>Let me introduce you the architecture our the application :</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a712c81b450295927c99906ae5442c82/f349c/archi.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.21621621621622%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAACeElEQVQozx1SXUhTARg9u9fde3c3FLFU1BRzQ0ydZjq1/Jm/I+1uV91yztWWzrH8m3N6NzfdTKFiqSkhhFDRSyI9Bb1UCEkUSWgGhWU+9RAEQYTPcbvzg8P3PZ3vO+d8KKhoQv65BkxMReEcDQCIIflyAJQxTCu5KMPyYSbJ5KORs00uu5sytjyaZkNHBwtugWJNAk3xIfqUdYXNtq4o5KYQA3VpHfJK6qDRVsNhNaPC4gFhihJUxxQF1QQqO6fxb76MEHXAjv+s4ftk4c/fA6Rq/Yoaoijtty/B6d2DZegtZO1TNE5ra2S5xTVkuroMtl47Md5vI5LavAQaR+RH4l+UNbcSM5GIsmf+EXGYB9kDd+3JONPqnBdr99ZAQoGhyf3aUeFbdWb/LI1CXYvmjK650mJ3KQIBIdU/Gkz3LvLJroubVTOWnc9C12vu+JJ6Ee/9FfpDf/6bZ4O6FOfNDfZ2xKWIzC6ecFz/8sc5uP8jq08iLKpqKZB8bDf3OJKDQSHN7w2mD8/2pLnaX5RPmz9sCp1bTYAIcRXYHi7I2vOXuO+HB1J80TuqaHhCGYstKN1jO8OesV13at8cjacPl2TOa310Ro4GlVXVRGNJtozQWklw3XK5BhQapZjCAotlkXg3Xl781Zd/9xcH6rm3Hv7HL3EjHMKGJEG/LslojVA4OngFm90B3Xk9DPoLyGu1Ad0xmZKfoRCvti7gkoiPnkx88hWVHgjFT45GEpm1q1rEL0fOpGSp1HMBhpdC4TqtMHBmNBiMMPS6gZYFqHhBJjeGFAwXoWlTmE6QkGgap5G1Sx77yd2ildLLkMYQnSCB5YOMkg/GZ8V/fbPCWLcDHaIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Architecture AWS\"\n        title=\"Architecture AWS\"\n        src=\"/static/a712c81b450295927c99906ae5442c82/fcda8/archi.png\"\n        srcset=\"/static/a712c81b450295927c99906ae5442c82/12f09/archi.png 148w,\n/static/a712c81b450295927c99906ae5442c82/e4a3f/archi.png 295w,\n/static/a712c81b450295927c99906ae5442c82/fcda8/archi.png 590w,\n/static/a712c81b450295927c99906ae5442c82/efc66/archi.png 885w,\n/static/a712c81b450295927c99906ae5442c82/c83ae/archi.png 1180w,\n/static/a712c81b450295927c99906ae5442c82/f349c/archi.png 2002w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>As you can see, it’s a very simple architecture. We don’t have to create so many resources to get a functional web app.</p>\n<p>Our goal here is to have a Client-Side application (developed in ReactJS), which will query an API (through API Gateway). Finally, this API will deserve some Lambda Functions that will interact with our DynamoDB database.</p>\n<p>Before going further, there is a list of pre-requires :</p>\n<ul>\n<li>You should have an AWS Account (to create one, please visit <a href=\"https://portal.aws.amazon.com/billing/signup#/start\">this link</a>)</li>\n<li><a href=\"https://curl.haxx.se/download.html\">CURL</a> or <a href=\"https://www.postman.com/\">Postman</a> to query our database.</li>\n<li>Node Package Manager (<a href=\"https://www.npmjs.com/get-npm\">npm</a>) or other package managers like <a href=\"https://classic.yarnpkg.com/en/docs/install/#windows-stable\">yarn</a>.</li>\n</ul>\n<blockquote>\n<p>I recommend connecting to your root account if you don’t have one, go to the IAM Dashboard and create an “admin” user. Once is done, attach the <code class=\"language-text\">AdministratorAccess</code> policy.</p>\n</blockquote>\n<blockquote>\n<p><strong>Be careful</strong>: For the entire article, I will use the region <strong>eu-west-2</strong>. You can choose every region you want, but do not forget to create all the same region for all your future created resources!</p>\n</blockquote>\n<p>Let’s start then :) Connect to your AWS Account by using the IAM users sign-in link.</p>\n<h3>First step: Create the Database (DynamoDB)</h3>\n<p>I will use a no NoSQL Database, <strong>DynamoDB</strong>. If you are curious and if you want more information about this database I provide you <a href=\"https://cloudacademy.com/blog/amazon-dynamodb-ten-things/\">this link</a> which describes perfectly what is DynamoDB.</p>\n<p>Let’s navigate to the DynamoDB service  via <code class=\"language-text\">Services &gt; Database &gt; DynamoDB</code>.</p>\n<p>Once you are here, we will create our blog table. Hit the <code class=\"language-text\">Create Table</code> button and fill the form like below :</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9ce9bacb311be4f2e53c772f201fd1e1/187fa/tablecreation.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.405405405405407%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABJ0AAASdAHeZh94AAAAvUlEQVQY041R267DIAzj/7+zUlXoBVrKuLR4OBrTeTnbIpmQpBjjKmstzDxjWRZorQXOOdRacd/3G9d1/UGRXEqRWYwR4zhiGAaodV2hjQEzSedGblpN4mmaJLPe9x3necIfB44Gz733AvbZY1a13RBCkENUxkFKSZBzFgLOfw3FhZK7im3bhKw/laScM/OZDNrxHxSXHiEmWOtEUXn5RSLW0muedcKPCvsHj5jFXB7uP4DqbLOCdqSUvxI+AeOQ1E5waNkCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dynamodb Blog Table\"\n        title=\"Dynamodb Blog Table\"\n        src=\"/static/9ce9bacb311be4f2e53c772f201fd1e1/fcda8/tablecreation.png\"\n        srcset=\"/static/9ce9bacb311be4f2e53c772f201fd1e1/12f09/tablecreation.png 148w,\n/static/9ce9bacb311be4f2e53c772f201fd1e1/e4a3f/tablecreation.png 295w,\n/static/9ce9bacb311be4f2e53c772f201fd1e1/fcda8/tablecreation.png 590w,\n/static/9ce9bacb311be4f2e53c772f201fd1e1/efc66/tablecreation.png 885w,\n/static/9ce9bacb311be4f2e53c772f201fd1e1/c83ae/tablecreation.png 1180w,\n/static/9ce9bacb311be4f2e53c772f201fd1e1/187fa/tablecreation.png 1194w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>When you create a DynamoDB table, a <code class=\"language-text\">partition key</code> is required to identify uniquely each item in your table.\nBut this primary key can also be composed of a <code class=\"language-text\">sort key</code>.</p>\n</blockquote>\n<blockquote>\n<p>The partition key is used for partitioning the data. Data with the same partition key are stored together, which allows you to query data with the same partition key in 1 query.</p>\n</blockquote>\n<blockquote>\n<p>The (optional) sort key determines the order of how data with the same partition key is stored. Using a clever sort key allows you to query many items in 1 query.</p>\n</blockquote>\n<h3>Second step: Configure our DynamoDB table settings</h3>\n<p>Our settings will be very simple. I will just create 1x <strong>Global Secondary Index (GSI)</strong> which is composed with a partition key (<code class=\"language-text\">title</code> here), and a sort key, <code class=\"language-text\">category</code>. GSIs can be created only at the table creation and not after.</p>\n<blockquote>\n<p>For the Read/Write capacity mode, I will change them to have a minimum of Read Capacity Units (RCUs) and Write capacity units (WCUs). Of course, if you intend to use this Database in a real production environment, you will adapt the RCUs/WCUs and perhaps use the Auto-Scaling, based on your application charge.</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8781f387b6e012a12d188ec00e491c82/1790f/dbconf.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.48648648648649%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABJ0AAASdAHeZh94AAABQ0lEQVQoz6VTi26DMAzk//+xLZ0GaIMl5B3C4xa7y0SHmCbN0onESs6+i6mUUtBaYxxHTNMEim3bGCXKfo91XTHP8yFfYRdE/HK/o2le0XUdrtcr455zhLqucblccLvV6PsexphDwSfClGa8DwLGWu62dE8X6eu95zyB1iTi0GGM8etQhA8RLs74T1RN04DQti26jGHo2U+CEAJSyicIOWKQGh+jhswQUj3W2mGaF1Tt28BkD08sVCYiqSRzD5aeobThy6PxGS7vLa+VDZhSJiQvCkKG84Gr0j6lhJjtWJbl75L3hlKs6wbrAobcsc2PE0Jg4rPxOTzKt19SwDl3Wnk/f4RTwnKodEjyyDN6ABqf/WXKU3Gy46zjqhDR1JM8yzOYmOhn0Jni5/5POnhYOqPqZYCJ2IUJxifYkNjbIvc3Pz8BKGapUzdL4E0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dynamodb Table Settings\"\n        title=\"Dynamodb Table Settings\"\n        src=\"/static/8781f387b6e012a12d188ec00e491c82/fcda8/dbconf.png\"\n        srcset=\"/static/8781f387b6e012a12d188ec00e491c82/12f09/dbconf.png 148w,\n/static/8781f387b6e012a12d188ec00e491c82/e4a3f/dbconf.png 295w,\n/static/8781f387b6e012a12d188ec00e491c82/fcda8/dbconf.png 590w,\n/static/8781f387b6e012a12d188ec00e491c82/efc66/dbconf.png 885w,\n/static/8781f387b6e012a12d188ec00e491c82/c83ae/dbconf.png 1180w,\n/static/8781f387b6e012a12d188ec00e491c82/1790f/dbconf.png 1189w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Once your DynamoDB settings are ready, feel free to hit the <code class=\"language-text\">Create</code> button and your table will be created in a few seconds.</p>\n<p>Once your database is available, you can provide some “Items” for later usage.</p>\n<p>This is a basic list of items that you can provide :</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"My first article\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"author\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Julien\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"category\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Blabla\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"A first content for a first article!\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"createdAt\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2020-05-28T22:00:00.000Z\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"A magic article\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"author\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Dumbledore\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"category\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Magic\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"You are a wizard Harry.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"createdAt\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2020-05-29T22:00:00.000Z\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"How to cook a steak\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"author\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Gordon Ramsay\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"category\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Cooking\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Are crazy ?! I will never teach you!!\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"createdAt\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2020-05-30T22:00:00.000Z\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<blockquote>\n<p>At this step, you should have your Blog table which contains 3 items</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e354ae519958591993fd023c2bd803f0/0d98f/items.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.621621621621614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABJ0AAASdAHeZh94AAABzklEQVQoz21STYvaUBTNfxLxJwiuVUjNmIK6cqNTF+5cThdu/QWFoaXMMLR0aAcFF910F0TEEq1aHUen5sOYxGjU09zLBKT0weHee879eLz7BM824W5M7B0Djr3BZvMCy4L1AopN02R/vV5zTNYwDEwmEwwGKh7nT9B0A0K7u8Ddj4D8/QztecGFVBAWhw10XWcu1ClerVawbZsb60aQZzsQvipPuP4+gTJYYPoYTDEteNstXNc9g4PtGec4Dg6HA8JD2nK55AHC7c1HPDx8w7vr9/hw+wk3d59xf/8FrVbrv2g2m2i322g0GqhUKqhWqyiVSiiXy6jVahBE8RVkWcblZTlIeIMLKQNJukA+n0cul2OQfx4XCgUkEglEIhFEo1HEYjH24/E4BFl+jWQyibdXV6jX6xBFEel0GqlUivGvHyKTyfBFstksW0mSUCwWIcxmM/xUh1B/jTEIMJ1O0el02Pb7faiqivF4jF6vx5YwGo1Y73a7UBQFw+GQ+fl8DoEe19z6MF0fx+CBT6cTb44OLYA2ejweeRG0ZdJ832c9/D60ec/zmBN2+z3+WFvotkfdsNvtOIkaUwNK5KFBEX2VsJh0+i6apjFoEHF/AV0zU8YJu+AcAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dynamodb Items\"\n        title=\"Dynamodb Items\"\n        src=\"/static/e354ae519958591993fd023c2bd803f0/fcda8/items.png\"\n        srcset=\"/static/e354ae519958591993fd023c2bd803f0/12f09/items.png 148w,\n/static/e354ae519958591993fd023c2bd803f0/e4a3f/items.png 295w,\n/static/e354ae519958591993fd023c2bd803f0/fcda8/items.png 590w,\n/static/e354ae519958591993fd023c2bd803f0/efc66/items.png 885w,\n/static/e354ae519958591993fd023c2bd803f0/c83ae/items.png 1180w,\n/static/e354ae519958591993fd023c2bd803f0/0d98f/items.png 1276w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Well done! Our DynamoDB is ready to be used :) Feel free to move on <a href=\"./../serverless-api-with-lambda-part-2\">to the Part 2</a> to start to configure our lambdas to query our DB.</p>","frontmatter":{"title":"Serverless App with AWS in ReactJS, using Lambda & API Gateway - Part 1","date":"May 28, 2020","description":"How to create a serverless app in AWS - Part 1 (The Database)"}}},"pageContext":{"slug":"/serverless-api-with-lambda-part-1/","previous":null,"next":{"fields":{"slug":"/serverless-api-with-lambda-part-2/"},"frontmatter":{"title":"Serverless App with AWS in ReactJS, using Lambda & API Gateway - Part 2"}}}},"staticQueryHashes":[]}