{"componentChunkName":"component---src-templates-blog-post-js","path":"/serverless-api-with-lambda-part-1/","result":{"data":{"site":{"siteMetadata":{"title":"Jstw Blog"}},"markdownRemark":{"id":"cf055cab-2197-5c6a-8dd1-534ecce3844d","excerpt":"Hey there! This is my first post on my new blog ;-) In this article we will have a look on how we can create a web application without handling any server…","html":"<p>Hey there! This is my first post on my new blog ;-)</p>\n<p>In this article we will have a look on how we can create a web application without handling any server architecture/installation.</p>\n<p>This kind of architecture is called “serverless”. (more information <a href=\"https://hackernoon.com/what-is-serverless-architecture-what-are-its-pros-and-cons-cc4b804022e9\">here</a>).</p>\n<p>Let me introduce you the architecture our the application :</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a712c81b450295927c99906ae5442c82/f349c/archi.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.21621621621622%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAACBUlEQVQoz2PQNHVmUDd2ZKioaWKIyytnAAH+0HIGNr9qdm7feg6ugGoOfv9Cdga508yT0pylD2aoOtsGhHIx+HazcfmXsbMFVLHLRUzkAmJOVv8qDgYYUNaxgLOZ/euZ2AIr2WD8X80mTCD6bLGh5+1S7acfExk4Qfz//xlQAKN3JQeDkp4No6KuDTNIICo6hqkkJZKJ16uAicExlxUkZubhxVRbV8cd3ryI8ZoGA+PcNFtRBjSQVXrdNq/8poVEUi07g7aZq6qWmYt5eGwqZ3lZqVhxXoVEXq+fYKrnXsva0LNXy4IP+IBdovyf4USxqdOdYvVDqzOtBJNal3F31iVx1tZPEI3PvPoxIev6A5GEMnYGHQtXTWA4eodFxQtUlJeJl+RXSGQ3RIileO80rQk5vbss6IAjzCUnczRlLxTrp0ypzhQsqu/iqa8u5urs6udOKzibnVF4LkUgsY6dYeuyyYxJyclsQuJyDKZm5kyO2mKMDHrRzAy+wawMygysDK4MDF1VZVwMk/4zHS8y0b9RpD7hgxMDCwM24FbHhlWcIbydkTsAU/JioY7hrTLdxb9y2FDk/kNjhyOgkp3BLziSwcMvlMHBzZfBNTodLMEdUMbI6lfFyeFbx87mX83B7F/Nzu9fxM4gfREceQx+rezAJMPB7FfFzgLEXAEVwORVAWJzAgByAJMyNZh8PwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Architecture AWS\"\n        title=\"Architecture AWS\"\n        src=\"/static/a712c81b450295927c99906ae5442c82/fcda8/archi.png\"\n        srcset=\"/static/a712c81b450295927c99906ae5442c82/12f09/archi.png 148w,\n/static/a712c81b450295927c99906ae5442c82/e4a3f/archi.png 295w,\n/static/a712c81b450295927c99906ae5442c82/fcda8/archi.png 590w,\n/static/a712c81b450295927c99906ae5442c82/efc66/archi.png 885w,\n/static/a712c81b450295927c99906ae5442c82/c83ae/archi.png 1180w,\n/static/a712c81b450295927c99906ae5442c82/f349c/archi.png 2002w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>As you can see, it’s a very simple architecture. We don’t have to create so many resources to get a functional web app.</p>\n<p>Our goal here, is to have a Client-Side application (developed in ReactJS), which will query an API (through API Gateway). Finally, this API will deserves some Lambda Functions that will interacts with our DynamoDB database.</p>\n<p>Before going further, there is a list of pre-requires :</p>\n<ul>\n<li>You should have an AWS Account (to create one, please visit <a href=\"https://portal.aws.amazon.com/billing/signup#/start\">this link</a>)</li>\n<li><a href=\"https://curl.haxx.se/download.html\">CURL</a> or <a href=\"https://www.postman.com/\">Postman</a> to query our database.</li>\n<li>Node Package Manager (<a href=\"https://www.npmjs.com/get-npm\">npm</a>) or other package managers like <a href=\"https://classic.yarnpkg.com/en/docs/install/#windows-stable\">yarn</a>.</li>\n</ul>\n<blockquote>\n<p>I recommend to connect to your root account if you don’t have one, go to the IAM Dashboard and create an “admin” user. Once is done, attach the <code class=\"language-text\">AdministratorAccess</code> policy.</p>\n</blockquote>\n<blockquote>\n<p><strong>Be careful</strong>: For the entire article, I wil use the region <strong>eu-west-2</strong>. You can choose every region you want, but do not forget to create all the keep the same region for all your future created resources!</p>\n</blockquote>\n<p>Let’s start then :) Connect to your AWS Account by using the IAM users sign-in link.</p>\n<h3>First step: Create the Database (DynamoDB)</h3>\n<p>I will use a no NoSQL Database, <strong>DynamoDB</strong>. If you are curious and if you want more information about this database I provide you <a href=\"https://cloudacademy.com/blog/amazon-dynamodb-ten-things/\">this link</a> which describes perfectly what is DynamoDB.</p>\n<p>Let’s navigate to the DynamoDB service  via <code class=\"language-text\">Services &gt; Database &gt; DynamoDB</code>.</p>\n<p>Once you are here, we will create our blog table. Hit the <code class=\"language-text\">Create Table</code> button and fill the form like below :</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9ce9bacb311be4f2e53c772f201fd1e1/187fa/tablecreation.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.405405405405407%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABJ0AAASdAHeZh94AAAAt0lEQVQY042QWRKEIAxEvf89XUYUQUFE0R47JfzNkqomIZhHS2WMwTAMGLWGUkpk7YzzPJFSKjqOo2jf95J5tq4rurZFXdeo9ANiHsdR4Nz3fY9X95KseoVlWeC9h3NOxDqLQO88QgiocAcbHLTW3oNObs63c3jbNvwbAuQA3c3zDD1NiDGWX2Ud7vPcY1zX9VEVlxxriDDGiuMMpFPucy8DvzrMHxDYNI28RUqHAFjT9fQ4/wV8A+4E1E2LSfG0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dynamodb Blog Table\"\n        title=\"Dynamodb Blog Table\"\n        src=\"/static/9ce9bacb311be4f2e53c772f201fd1e1/fcda8/tablecreation.png\"\n        srcset=\"/static/9ce9bacb311be4f2e53c772f201fd1e1/12f09/tablecreation.png 148w,\n/static/9ce9bacb311be4f2e53c772f201fd1e1/e4a3f/tablecreation.png 295w,\n/static/9ce9bacb311be4f2e53c772f201fd1e1/fcda8/tablecreation.png 590w,\n/static/9ce9bacb311be4f2e53c772f201fd1e1/efc66/tablecreation.png 885w,\n/static/9ce9bacb311be4f2e53c772f201fd1e1/c83ae/tablecreation.png 1180w,\n/static/9ce9bacb311be4f2e53c772f201fd1e1/187fa/tablecreation.png 1194w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>When you create a DynamoDB table, a <code class=\"language-text\">partition key</code> is required to identify uniquely each item in your table.\nBut this primary key can also be composed of a <code class=\"language-text\">sort key</code>.</p>\n</blockquote>\n<blockquote>\n<p>The partition key is used for partitioning the data. Data with the same partition key is stored together, which allows you to query data with the same partition key in 1 query.</p>\n</blockquote>\n<blockquote>\n<p>The (optional) sort key determines the order of how data with the same partition key is stored. Using a clever sort key allows you to query many items in 1 query.</p>\n</blockquote>\n<h3>Second step: Configure our DynamoDB table settings</h3>\n<p>Our settings will be very simple. I will just create 1x <strong>Global Secondary Index (GSI)</strong> which is composed with a partition key (<code class=\"language-text\">title</code> here), and a sort key, <code class=\"language-text\">category</code>. GSIs can be created only at the table creation and not after.</p>\n<blockquote>\n<p>For the Read/Write capacity mode, I will change them to have the minimum of Read capacity units (RCUs) and Write capacity units (WCUs). Of course, if you intent to use this Database in a real production environment, you will should adapt the RCUs/WCUs and perhaps use the Auto-Scaling, based on your application charge.</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8781f387b6e012a12d188ec00e491c82/1790f/dbconf.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.48648648648649%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABJ0AAASdAHeZh94AAABSklEQVQoz6VSDa+DIAzk///IvblP3RRBUER0N44Fs/eWLUtek0uh2tK7VrRtC6UUpJTw3uNbu91umOc5+WeI/JFmjMFhv8fpdEJZliiKAtttgX2MEbvdDj+bTYrXdY2u69bivwpmY4dldYXSGsMwoGmaCLkyYIG+7xOstS/dpYLTNIEIYcLoJ1gX8B8TpHc+E+cEKZtEnd3o2Cn9M3SE6mz0Fp2hN+lseocpLBDH8orD4YjL5ZISpGyRB7WiVTHGcwsZfd0a1MqgiZBKR28hdQ/nZwhrH3pQF+o2DC5q2CU9l2WJUoR1aF9R/rMMCPMCbXpUVZUo86Fx9C/TfAfBJE6VNJn8ae+ez28LkhYXNC8p75SA2pko+hzv+eccpzRvC+ZXWXAcx5REiiHML10+VuzzWolMheLzdU7aOZe6GH3AEOF8WLsnPtG+A/74qUeY+4bBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dynamodb Table Settings\"\n        title=\"Dynamodb Table Settings\"\n        src=\"/static/8781f387b6e012a12d188ec00e491c82/fcda8/dbconf.png\"\n        srcset=\"/static/8781f387b6e012a12d188ec00e491c82/12f09/dbconf.png 148w,\n/static/8781f387b6e012a12d188ec00e491c82/e4a3f/dbconf.png 295w,\n/static/8781f387b6e012a12d188ec00e491c82/fcda8/dbconf.png 590w,\n/static/8781f387b6e012a12d188ec00e491c82/efc66/dbconf.png 885w,\n/static/8781f387b6e012a12d188ec00e491c82/c83ae/dbconf.png 1180w,\n/static/8781f387b6e012a12d188ec00e491c82/1790f/dbconf.png 1189w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Once your DynamoDB settings are ready, feel free to hit the <code class=\"language-text\">Create</code> button and your table will be created in few seconds.</p>\n<p>Once your database is available, you can provide some “Items” for later usages.</p>\n<p>This is a basiclist of items that you can provide :</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"My first article\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"author\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Julien\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"category\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Blabla\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"A first content for a first article!\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"createdAt\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2020-05-28T22:00:00.000Z\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"A magic article\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"author\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Dumbledore\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"category\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Magic\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"You are a wizard Harry.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"createdAt\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2020-05-29T22:00:00.000Z\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"How to cook a steak\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"author\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Gordon Ramsay\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"category\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Cooking\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Are crazy ?! I will never teach you!!\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"createdAt\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2020-05-30T22:00:00.000Z\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<blockquote>\n<p>At this step, you should have your Blog table which contains 3 items</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e354ae519958591993fd023c2bd803f0/0d98f/items.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.621621621621614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABJ0AAASdAHeZh94AAAB20lEQVQoz2VS22paQRSdf1LEP/AGKuoHCM1D44MPXtLLS2rqi+CLX9AHXwsNhaaBgGlRhEYSxMsRTEFSKfV4vJxzPDf16Kp7WoMhGxZrz5rNDDNrMUOdQ9dUrAwFlmnAMMwdjGfQNI2zruuPvFgsMBgM8PP+Hr+GQ0iTCVijL6LSfMDDbxGS+AfT6RTz+Ryz2Yz3BFmWMR6LXJMk6f96jNFo9NjPZBWaboCd34r48H2I1kCCKI6hGRY2mw3W6/UT2Lb9hA9ru93yyxRFAbv8eoHK9Td8/PQZ5xdX+HJ5hetKBbVaDdVqlfNhT1yv11Eul1EoFFAsFvH+7Az5fB6lUgnsxdERkskkXp2c4O2b1zg+folEIoFMJoN0Ov0MqVQK2WwW4XAYDocDLpcLbrcbTqcTPp8PLBKJwOv14N3pKXK5HAKBAPx+Pzwez0738qFD3iMYDCIWiyEajXKEQiHE43GwXq+H27sm2l0BHaGHbrfLnyQIAhqNBprN3V67jZsfN+h0Orwn7OfoG2im1Wqh3++DkQGqZUMxbdjbf59MkaAyTZNHg2YOI7M3haKkqirHarXiGlsulxjJJiYLi/wCrSkKVOSaZVncWXJxsssZRYo0cpYiRRpFiQ6n+guJBVO1yk8rqwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dynamodb Items\"\n        title=\"Dynamodb Items\"\n        src=\"/static/e354ae519958591993fd023c2bd803f0/fcda8/items.png\"\n        srcset=\"/static/e354ae519958591993fd023c2bd803f0/12f09/items.png 148w,\n/static/e354ae519958591993fd023c2bd803f0/e4a3f/items.png 295w,\n/static/e354ae519958591993fd023c2bd803f0/fcda8/items.png 590w,\n/static/e354ae519958591993fd023c2bd803f0/efc66/items.png 885w,\n/static/e354ae519958591993fd023c2bd803f0/c83ae/items.png 1180w,\n/static/e354ae519958591993fd023c2bd803f0/0d98f/items.png 1276w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Well done! Our DynamoDB is ready to be used :) Feel free to move on <a href=\"./../serverless-api-with-lambda-part-2\">to the Part 2</a> to start to configure our lambdas to query our DB.</p>","frontmatter":{"title":"Serverless App with AWS in ReactJS, using Lambda & API Gateway - Part 1","date":"May 28, 2020","description":"How to create a serverless app in AWS - Part 1 (The Database)"}}},"pageContext":{"slug":"/serverless-api-with-lambda-part-1/","previous":null,"next":{"fields":{"slug":"/serverless-api-with-lambda-part-2/"},"frontmatter":{"title":"Serverless App with AWS in ReactJS, using Lambda & API Gateway - Part 2"}}}}}